"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["4659"],{886598(e,t){t.A=2},75966(e,t){t.A={BOARD_PICKER:"board_picker",ORGANIZE_PINS:"organize_pins",PROFILE:"profile",PIN_CLUSTER:"create_pin_cluster_page"}},427772(e,t,r){r.d(t,{_:function(){return a}});var n={á:"a",à:"a",â:"a",ä:"a",ã:"a",å:"a",æ:"a",ç:"c",é:"e",è:"e",ê:"e",ë:"e",í:"i",ì:"i",î:"i",ï:"i",ñ:"n",ó:"o",ò:"o",ô:"o",ö:"o",õ:"o",ø:"o",œ:"o",ß:"s",ú:"u",ù:"u",û:"u",ü:"u"},o=function(e){if(!e)return"";for(var t="",r=0;r<e.length;r+=1)t+=n[e.charAt(r)]||e.charAt(r);return t},i=function(e,t){for(var r=t.split(" "),n=e.split(" "),i=0,a=0;a<n.length;a+=1)(o(n[a]).includes(r[i])||n[a].includes(r[i]))&&(i+=1);return i===r.length},a=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name",n=t.toLowerCase();return e.filter(function(e){return i(e[r].toLowerCase(),n)})}},629342(e,t,r){r.d(t,{Ah:function(){return ep},Pc:function(){return ev},FE:function(){return ey},K$:function(){return eS},cC:function(){return em}});var n=r(157203),o=r(106386),i=r(319722),a=r(460657),s=r(186122),l=r(752411),c=r(837855),d=r(370714),u=r(227581),g=r(361268),h=r(805454),p=r(467780),_=r(204597),f=r(799632),b=r(886598),y=r(745764),v=r(667576),m=r(75966),S=r(50166),x=r(891546),j=r(879667);function w(e){var t=e.children,r=e.headingLevel,n=e.textWeight,o=e.size,i="100"===o?"200":o,s="500"===o||"600"===o?"400":o;return(0,j.jsx)(a._Y,{accessibilityLevel:r,size:i,children:(0,j.jsx)(a.KJ,{inline:!0,size:s,weight:void 0===n?"normal":n,children:t})})}function P(e){var t=e.boardPickerSuggestedBoards,r=e.clientTrackingParams,n=e.headingLevel,o=e.imageSignature,i=e.index,l=e.item,c=e.pinId,d=e.saveSessionId,u=e.surfaceOriginViewParameter,g=e.useLegoLayout,h=(0,s.o)().logContextEvent;return(0,x.A)(function(){"shortlist"===l.category&&h({aux_data:{board_picker_surface_origin:u,board_picker_suggested_boards:t,image_signature:o,pin_id:c,save_session_id:d},event_type:13,clientTrackingParams:r,view_type:21,view_parameter:3988})}),(0,j.jsx)(a.az,{marginTop:i>0?2:1,paddingX:g?4:3,paddingY:1,children:(0,j.jsx)(w,{headingLevel:void 0===n?3:n,size:g?"100":"200",children:l.title})})}var A=r(350762),B=r(394841);function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function k(e){var t,r=e.accessibilityLabelText,o=e.board,i=e.boardPickerSuggestedBoards,l=e.buttonText,c=e.clientTrackingParams,u=e.displayAlreadySavedMsg,g=e.gridIndex,h=e.imageSignature,p=e.isSectionOpen,_=e.onButtonClick,f=e.onClick,b=e.pinId,y=e.saveSessionId,v=e.shouldOpenSections,m=void 0===v||v,S=e.showSaveToProfile,x=e.showFlyoutSaveButton,w=e.surfaceOriginViewParameter,P=e.useLegoLayout,k=(0,s.o)().logContextEvent,z=(0,d.A)(),C=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(!1))||function(e,t){var r=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,0)||function(e,t){if(e){if("string"==typeof e)return O(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,2):void 0}}(t,0)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),T=C[0],I=C[1],L=(0,n.useRef)(null),E=!!o.section_count&&o.section_count>0,R=E?"boardWithSection":"boardWithoutSection",F=o||{},D=F.images,N=F.image_cover_url,J=!(null!=N&&N.includes("custom"))&&D&&D["75x75"]&&D["75x75"][D["75x75"].length-1].url||N;(0,n.useEffect)(function(){"boardless"===o.type&&k({aux_data:{board_index:g,board_picker_surface_origin:w,board_picker_suggested_boards:i,image_signature:h,pin_id:b,save_session_id:y},clientTrackingParams:c,event_type:13,view_parameter:3990,view_type:21})},[]),(0,n.useEffect)(function(){L.current&&p&&E&&L.current.focus()},[L,p,E]);var M=function(){f(o)};return(0,j.jsx)(a.az,{"data-test-id":R,role:"listitem",children:(0,j.jsx)(a.Rp,{ref:L,dataTestId:p&&E?"board-row-input":void 0,onBlur:function(){I(!1)},onFocus:function(){I(!0)},onMouseEnter:function(){I(!0)},onMouseLeave:function(){I(!1)},onTap:M,children:(0,j.jsxs)(a.az,{alignItems:"center",color:T?"secondary":"default","data-test-id":"board-row-".concat(o.name||""),display:"flex",height:P?64:52,marginBottom:+!P,marginEnd:P?2:3,marginStart:P?2:3,marginTop:+!P,padding:2*!!P,rounding:300,children:[(0,j.jsxs)(a.az,{"aria-hidden":"true",flex:"none",height:P?48:36,marginBottom:+!P,marginEnd:P?2:3,marginStart:2*!P,marginTop:+!P,overflow:"hidden",width:P?48:36,children:[S&&"boardless"===o.type&&(0,j.jsx)(a.n1,{height:"100%",rounding:200,width:"100%",children:(0,j.jsx)(a.az,{alignItems:"center",color:T?"default":"secondary",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:(0,j.jsx)(a.az,{children:(0,j.jsx)(a.In,{accessibilityLabel:"",color:"default",icon:"clock-history",size:24})})})}),J&&!m&&(0,j.jsx)(a.n1,{height:P?48:36,rounding:200,wash:!0,width:P?48:36,children:(0,j.jsx)(a._V,{alt:"",fit:"cover",naturalHeight:P?48:36,naturalWidth:P?48:36,src:J})}),J&&m?(0,j.jsx)(a.n1,{height:P?48:36,rounding:200,wash:!0,width:P?48:36,children:(0,j.jsx)(a._V,{alt:"",fit:"cover",naturalHeight:P?48:36,naturalWidth:P?48:36,src:J})}):(0,j.jsx)(a.n1,{height:P?48:36,rounding:200,width:P?48:36,children:(0,j.jsx)(a.az,{color:m?"secondary":"transparent",height:"100%",width:"100%"})})]}),(0,j.jsxs)(a.az,{flex:"grow",marginStart:+!P,overflow:"hidden",paddingY:1,children:[(0,j.jsx)(a.KJ,{lineClamp:1,overflow:"breakAll",weight:m||!m?"bold":"normal",children:o.name}),u&&(0,j.jsx)(a.az,{marginTop:1,children:(0,j.jsx)(a.KJ,{align:"start",color:"default",size:"100",children:z._('Saved here already', 'BoardFlyout.AlreadySaved.Message', 'Text that indicates if a pin has been already saved to a board')})})]}),(0,j.jsxs)(a.so,{alignItems:"center",gap:2,children:[(0===o.section_count||!m)&&(void 0===x||x)&&(0,j.jsx)(a.az,{"data-test-id":"board-row-save-button-container",flex:"none",opacity:100*!!T,children:(0,j.jsx)(a.$n,{accessibilityLabel:r||z._('save', 'boardRow.saveButton', 'Default accessibility label for the board row save button'),color:"primary","data-test-id":"board-row-save-button",onClick:function(e){var t=e.event;M(),_&&_(),t.stopPropagation()},tabIndex:-1,text:l||z._('Save', 'save button', 'save button')})}),o&&!p?(0,j.jsx)(a.az,{marginEnd:2*!P,children:(0,j.jsx)(B.A,{board:o,showCollaborativeIcon:!!o.is_collaborative,showPrivateIcon:o.privacy===A.A.BoardPrivacy.SECRET,showProtectedIcon:o.privacy===A.A.BoardPrivacy.PROTECTED,showSectionsIcon:E&&m,useLegoLayout:P})}):null]})]})})})}var z=r(251381),C=r(506698);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach(function(t){D(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(E=function(){return!!e})()}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function D(e,t,r){return(t=N(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=T(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}var J=function(e){var t;function r(){var e,t,o;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=r,o=[].concat(a),t=R(t),D(e=function(e,t){if(t&&("object"==T(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,E()?Reflect.construct(t,o||[],R(this).constructor):t.apply(this,o)),"state",{hovered:!1}),D(e,"handleMouseEnter",function(){e.setState({hovered:!0})}),D(e,"handleMouseLeave",function(){e.setState({hovered:!1})}),D(e,"handleTouch",function(){var t=e.props,r=t.board;(0,t.onClick)(t.section,r)}),D(e,"handleButtonClick",function(t){var r=t.event,n=e.props.onButtonClick;e.handleTouch(),n&&n(),r.stopPropagation()}),D(e,"tapAreaRef",(0,n.createRef)()),e}if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&F(r,e),t=[{key:"focus",value:function(){var e=this.tapAreaRef.current;e&&e.focus()}},{key:"render",value:function(){var e,t,r,n,o,i,s=this.state.hovered,l=this.props,c=l.buttonText,d=l.section,u=l.showSectionSaveButton,g=l.useLegoLayout;return(0,j.jsx)(a.Rp,{ref:this.tapAreaRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,children:(0,j.jsxs)(a.az,{alignItems:"center",color:s?"secondary":"default",dangerouslySetInlineStyle:{__style:g?{}:{marginLeft:53,marginRight:11}},"data-test-id":"section-row-".concat(d.title||""),display:"flex",height:g?64:52,marginEnd:2*!!g,marginStart:2*!!g,marginTop:+!g,padding:2*!!g,role:"listitem",rounding:300,children:[g&&!!(null!=(e=d.preview_pins)&&e.length)&&(0,j.jsx)(C.A,{image_url:null!=(t=d.preview_pins[0].image_square_url)?t:"",naturalHeight:null!=(r=null==(n=d.preview_pins[0].image_square_size_pixels)?void 0:n.height)?r:1,naturalWidth:null!=(o=null==(i=d.preview_pins[0].image_square_size_pixels)?void 0:i.width)?o:1}),(0,j.jsx)(a.az,{flex:"grow",marginStart:4*!g,paddingY:1,children:(0,j.jsx)(a.KJ,{lineClamp:1,weight:g?"bold":"normal",children:d.title})}),s&&u&&(0,j.jsx)(a.az,{flex:"none",marginEnd:2*!g,children:(0,j.jsx)(a.$n,{accessibilityLabel:"save button",color:"primary",onClick:this.handleButtonClick,text:c||this.props.i18n._('Save', 'save button', 'save button')})})]})})}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,N(n.key),n)}}(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}(n.Component);function M(e){var t=(0,d.A)();return(0,j.jsx)(J,L(L({},e),{},{i18n:t}))}function H(e){var t=(0,d.A)(),r=e.board,n=e.buttonText,o=e.onClick,i=e.onButtonClick,s=e.showSectionSaveButton,l=e.useLegoLayout,u=(0,z.A)(),g=(0,c.A)(),h=(0,v.H7)(g,u),p=(0,f.A)({name:"BoardSectionsRepinResource",options:{board_id:r.id,orbac_subject_id:h},noCache:!0}),_=p&&p.data||[];return(0,j.jsxs)(a.az,{children:[!p.isLoaded&&(0,j.jsx)(a.so,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,j.jsx)(a.y$,{accessibilityLabel:t._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})}),p.isLoaded&&(0,j.jsxs)(a.az,{children:[l&&(0,j.jsx)(a.az,{marginStart:4,marginTop:2,paddingY:1,children:(0,j.jsx)(w,{headingLevel:3,size:"200",children:t._('Section', 'PinBetterSave.BoardFlyout.SectionPlaceholderText', 'section list title')})}),_.map(function(e){return(0,j.jsx)(M,{board:r,buttonText:n,onButtonClick:i,onClick:o,section:e,showSectionSaveButton:s,useLegoLayout:l},e.id)})]})]})}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function U(e){var t,r=e.onClick,o=e.title,i=e.showIcon,s=(0,d.A)(),l=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(!1))||function(e,t){var r=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{for(i=(r=r.call(e)).next;!(l=(n=i.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,0)||function(e,t){if(e){if("string"==typeof e)return W(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(e,2):void 0}}(t,0)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=l[0],u=l[1];return(0,j.jsx)(a.Rp,{dataTestId:"board-suggestion-row-button",onMouseEnter:function(){return u(!0)},onMouseLeave:function(){return u(!1)},onTap:function(){r({title:o})},children:(0,j.jsxs)(a.az,{alignItems:"center",color:c?"secondary":"default",display:"flex",height:i?64:52,marginBottom:1,marginEnd:3,marginStart:3,role:"listitem",rounding:300,children:[(0,j.jsx)(a.az,{flex:"none",height:i?48:36,marginBottom:1,marginEnd:3,marginStart:i?1:2,marginTop:1,overflow:"hidden",rounding:i?200:100,width:i?48:36,children:(0,j.jsx)(a.az,{alignItems:i?"center":void 0,color:"secondary",display:i?"flex":void 0,height:"100%",justifyContent:i?"center":void 0,width:"100%",children:i&&(0,j.jsx)(a.In,{accessibilityLabel:"",color:"default",icon:"plus",size:20})})}),(0,j.jsx)(a.az,{flex:"grow",paddingY:1,children:(0,j.jsx)(a.KJ,{lineClamp:1,weight:"bold",children:o})}),c&&(0,j.jsx)(a.az,{marginEnd:2,children:(0,j.jsx)(a.$n,{accessibilityLabel:"create button",color:"primary",text:s._('Create', 'create button to create a new board', 'create button to create a new board')})})]})})}function V(e){var t=(0,d.A)(),r=e.suggestionsResource,o=e.onClick,i=e.pinBuilderSuggestions,s=e.inWebRepinFlowExp,l=i||r&&r.data||[],c=(0,j.jsxs)(n.Fragment,{children:[s&&(0,j.jsx)(a.az,{marginStart:4,marginTop:2,paddingY:1,children:(0,j.jsx)(w,{headingLevel:3,size:"100",children:t._('Suggestions', 'PinBetterSave.BoardFlyout.SectionPlaceholderText', 'section list title')})}),l.map(function(e,t){return(0,j.jsx)(U,{onClick:o,showIcon:s,title:e.title},t)})]});return(0,j.jsx)(n.Fragment,{children:l?c:(0,j.jsx)(a.so,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,j.jsx)(a.y$,{accessibilityLabel:t._('loading board suggestions', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})})})}function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function K(e){var t=e.isBoardCreate,r=e.onCreateBoardClick,o=e.useLegoLayout,i=(0,d.A)(),s=Q((0,n.useState)(!1),2),l=s[0],c=s[1],u=Q((0,n.useState)(!1),2),g=u[0],h=u[1];return(0,j.jsx)(a.az,{"data-test-id":"create-board",display:"flex",height:"100%",rounding:200,children:(0,j.jsx)(a.Rp,{dataTestId:t?"create-board-button":"create-section-button",onBlur:function(){return h(!1)},onFocus:function(){return h(!0)},onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},onTap:r,rounding:200,children:(0,j.jsxs)(a.az,{alignItems:"center",color:l?"secondary":"default",dangerouslySetInlineStyle:{__style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=$(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},g?{border:"2px solid var(--sema-color-border-focus-outer-default)"}:{})},display:"flex",height:"100%",padding:o?4:2,width:"100%",children:[(0,j.jsx)(a.az,{color:o?"secondary":"transparent",dangerouslySetInlineStyle:{__style:o?{padding:"14px"}:{}},marginEnd:o?2:5,marginStart:4*!o,rounding:200*!!o,children:(0,j.jsx)(a.In,{accessibilityLabel:"",color:o?"default":"error",icon:o?"plus":"circle-plus",size:o?20:28})}),t?(0,j.jsx)(a.KJ,{align:"center",lineClamp:1,weight:"bold",children:i._('Create board', ' - ', ' -- ')}):(0,j.jsx)(a.KJ,{align:"center",lineClamp:1,weight:"bold",children:i._('Create section', ' - ', ' -- ')})]})})})}D(J,"defaultProps",{showSectionSaveButton:!0});var G=r(427772),X=r(666240);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var l=Object.create((n&&n.prototype instanceof s?n:s).prototype);return et(l,"_invoke",function(r,n,o){var i,s,l,c=0,d=o||[],u=!1,g={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,r){return i=t,s=0,l=e,g.n=r,a}};function h(r,n){for(s=r,l=n,t=0;!u&&c&&!o&&t<d.length;t++){var o,i=d[t],h=g.p,p=i[2];r>3?(o=p===n)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=r<2&&h<i[1])?(s=0,g.v=n,g.n=i[1]):h<p&&(o=r<3||i[0]>n||n>p)&&(i[4]=r,i[5]=n,g.n=p,s=0))}if(o||r>1)return a;throw u=!0,n}return function(o,d,p){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&h(d,p),s=d,l=p;(t=s<2?e:l)||!u;){i||(s?s<3?(s>1&&(g.n=-1),h(s,l)):g.n=l:g.v=l);try{if(c=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(u=g.n<0)?l:r.call(n,g))!==a)break}catch(t){i=e,s=1,l=t}finally{c=1}}return{value:t,done:u}}}(r,o,i),!0),l}var a={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var d=c.prototype=s.prototype=Object.create([][n]?t(t([][n]())):(et(t={},n,function(){return this}),t));function u(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,et(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,et(d,"constructor",c),et(c,"constructor",l),l.displayName="GeneratorFunction",et(c,o,"GeneratorFunction"),et(d),et(d,o,"Generator"),et(d,n,function(){return this}),et(d,"toString",function(){return"[object Generator]"}),(ee=function(){return{w:i,m:u}})()}function et(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(et=function(e,t,r,n){function i(t,r){et(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(i("next",0),i("throw",1),i("return",2))})(e,t,r,n)}function er(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function en(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?en(Object(r),!0).forEach(function(t){ed(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):en(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ei(e){return function(e){if(Array.isArray(e))return ea(e)}(e)||function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ea(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ea(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function es(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(es=function(){return!!e})()}function el(e){return(el=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ec(e,t){return(ec=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ed(e,t,r){return(t=eu(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eu(e){var t=function(e,t){if("object"!=Z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Z(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Z(t)?t:t+""}var eg="allBoards",eh="shortlist",ep=function(e){var t;function r(){var e,t,n,o;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");for(var a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];return t=r,n=[].concat(s),t=el(t),ed(e=function(e,t){if(t&&("object"==Z(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,es()?Reflect.construct(t,n||[],el(this).constructor):t.apply(this,n)),"state",{boardSuggestions:[],isSectionOpen:null,selectedBoardId:"",selectedBoardCategory:"",searchQuery:"",searchBoxFocused:!0,saveSessionId:(0,i.A)()}),ed(e,"handleScroll",function(){e._container,(0,e.props.logContextEvent)({event_type:110,component:13282,view_type:21})}),ed(e,"refHandler",function(t){e.removeEventListeners(),t&&t.addEventListener("scroll",e.handleScroll,{once:!0}),e._container=t}),ed(e,"getItems",function(t){var r=e.props,n=r.boardResource,o=r.showSaveToProfile,i=r.checkExperiment;if(!(null!=n&&n.data))return[];var a=n.data.all_boards,s=a.length>=3,l=o&&a.length&&i("web_curation_board_picker_reorder_profile_option").anyEnabled,c=[{boardId:"",image_cover_url:"",is_collaborative:!1,isOpen:!1,name:e.props.i18n._('Profile', 'pinBetterSave.initialSelection.boardlessPinsOption', 'Option to save to profile without a board.'),privacy:"public",section_count:0,type:"boardless",url:"/me/"}],d=e.getAllBoards().map(function(t,r){return e.mapBoards(t,eg,r)}),u=e.getShortlist().map(function(t,r){return e.mapBoards(t,eh,r)}),g=e.state.searchQuery;return g.length>=b.A?ei((0,G._)(d,g)):[].concat(ei(s||!o||l?[]:[{type:"header",title:e.props.i18n._('Quick save and organize later', 'BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.boardlessPinsTitle', 'Header saving to profile')}].concat(c)),ei(s&&s&&o&&!l?c:[]),ei(s&&null!=u&&u.length?[{category:eh,type:"header",title:t?e.props.i18n._('Top choices', 'PinBetterSave.BoardFlyout.TopChoicesSectionTitle', 'Header for top suggestions in board picker'):e.props.i18n._('Top board suggestions', 'Header for top suggesions in board picker', 'Header for top suggesions in board picker')}].concat(ei(u)):[]),ei(a.length>0?[{type:"header",title:!s&&o?e.props.i18n._('Save to board', 'BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.saveToBoardTitle', 'Header for boards when there are less than 3 boards in board picker'):e.props.i18n._('All boards', 'Header for all boards in board picker', 'Header for all boards in board picker')}].concat(ei(d),ei(l?c:[])):[]))}),ed(e,"mapBoards",function(t,r,n){var o=e.state,i=o.selectedBoardId,a=o.selectedBoardCategory,s=t.id===i&&r===a;return eo(eo({},t),{},{category:r,isOpen:s,gridIndex:n})}),ed(e,"handleBack",function(){var t=e.props.setBoardWithSection;e.setState({isSectionOpen:!1,selectedBoardId:"",selectedBoardCategory:""}),t&&t(null)}),ed(e,"handleSectionClick",function(t,r){var n=e.props,o=n.clientTrackingParams,i=n.imageSignature,a=n.logContextEvent,s=n.onItemChosen,l=n.pinId,c=n.surfaceOriginViewParameter,d=n.surface,u=e.state,g=u.saveSessionId,h=u.searchQuery;a({event_type:101,clientTrackingParams:o,component:13282,element:36,object_id_str:r.id,view_type:91,view_parameter:3133,aux_data:{board_id:r.id,board_picker_surface_origin:c,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:r.gridIndex,image_signature:i,is_profile_save:!1,pin_id:l,save_session_id:g,search_query:h,section_id:t.id,source:d}}),s({boardId:r.id,url:t.slug?"".concat(r.url).concat(t.slug,"/"):r.url,sectionId:t.id,title:t.title||"",type:t.type,imageCoverUrl:r.image_cover_url,ownerUsername:r.owner&&r.owner.username||"",boardPickerSuggestedBoards:JSON.stringify(e.getTopChoiceBoardsAuxData())})}),ed(e,"getPinBuilderSuggestions",(o=ee().m(function t(){var r,n,o,i,a,s,c,d,u;return ee().w(function(t){for(;;)switch(t.n){case 0:if(n=(r=e.props).clientTrackingParams,o=r.imageSignature,i=r.logContextEvent,a=r.pinId,s=r.surfaceOriginViewParameter,c=e.state.saveSessionId,!a){t.n=2;break}return t.n=1,(0,l.A)({url:"/v3/pins/{pin}/board_title_suggestions/",urlParams:{pin:a}});case 1:(d=t.v).resource_response.data&&(u=d.resource_response.data.map(function(e){var t,r;return{title:null!=(t=e.title)?t:"",metadata:JSON.parse(null!=(r=null==e?void 0:e.metadata)?r:"{}")}})||[],e.setState({boardSuggestions:u}),i({aux_data:{board_picker_surface_origin:s,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),image_signature:o,pin_id:a,save_session_id:c},component:13282,clientTrackingParams:n,event_type:13,view_parameter:3992,view_type:21}));case 2:return t.a(2)}},t)}),function(){var e=this,t=arguments;return new Promise(function(r,n){var i=o.apply(e,t);function a(e){er(i,r,n,a,s,"next",e)}function s(e){er(i,r,n,a,s,"throw",e)}a(void 0)})})),ed(e,"getAllBoards",function(){var t,r=e.props,n=r.boardResource,o=r.advertiser_id;return((null==n||null==(t=n.data)?void 0:t.all_boards)||[]).filter(function(e){return!o||"secret"!==e.privacy})}),ed(e,"getShortlist",function(){var t,r=e.props,n=r.suggestedBoardsShortListResource,o=r.displayShortlistMostRecentBoard,i=r.boardResource,a=(null==i||null==(t=i.data)?void 0:t.boards_shortlist)||[];return o?a:(null==n?void 0:n.data)||[]}),ed(e,"getBoards",function(t){return t===eg?e.getAllBoards():t===eh?e.getShortlist():[]}),ed(e,"getSuggestedBoardsIds",function(){var t=e.props.showSaveToProfile,r=(t?e.getShortlist().slice(0,2):e.getShortlist()).map(function(e){return e.id});return t&&r.unshift("PROFILE_PINS"),r}),ed(e,"getTopChoiceBoardsAuxData",function(){return(e.props.showSaveToProfile?e.getShortlist().slice(0,2):ei(e.getShortlist())).map(function(e){var t,r;return{board_title_id:String(e.id),board_title_kind:JSON.parse(null!=(t=e.recommendation_reason)?t:"{}").reason,board_title:String(e.name),board_title_score:JSON.parse(null!=(r=e.recommendation_reason)?r:"{}").score}})}),ed(e,"getBoardTitleSuggestionsAuxData",function(){return e.state.boardSuggestions.map(function(e){return{board_title_id:String(e.metadata.value),board_title_kind:String(e.metadata.kind),board_title:String(e.title),board_title_score:String(e.metadata.confidence)}})}),ed(e,"handleBoardWithSectionsClick",function(t){var r=e.props,n=r.clientTrackingParams,o=r.logContextEvent,i=r.pinId,a=r.setBoardWithSection,s=r.surfaceOriginViewParameter,l=e.state,c=l.saveSessionId,d=l.searchQuery,u=l.selectedBoardId,g=l.selectedBoardCategory,h=e.getBoards(t.category).find(function(e){return e.id===t.id}),p=u===t.id&&g===t.category;o({event_type:13,clientTrackingParams:n,component:13282,element:36,object_id_str:t.id,view_type:275,aux_data:{board_id:t.id,board_picker_surface_origin:s,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:t.gridIndex,is_profile_save:!1,pin_id:i,save_session_id:c,search_query:d}}),h&&a&&a(h),e.setState({isSectionOpen:!0,selectedBoardId:p?"":t.id,selectedBoardCategory:p?"":t.category})}),ed(e,"handleBoardClick",function(t){var r=t.board,n=t.toggleSections,o=e.props,i=o.clientTrackingParams,a=o.imageSignature,s=o.logContextEvent,l=o.onItemChosen,c=o.pinId,d=o.surfaceOriginViewParameter,u=o.surface,g=e.state,h=g.saveSessionId,p=g.searchQuery;e.setState({searchBoxFocused:!1}),n?(s({event_type:101,component:13282,element:36,clientTrackingParams:i,object_id_str:r.id,view_type:91,view_parameter:r.category===eh?3988:3989,aux_data:{board_id:r.id,board_component:r.category===eh?3988:3989,board_picker_surface_origin:d,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:r.gridIndex,image_signature:a,is_profile_save:!1,pin_id:c,save_session_id:h,search_query:p}}),e.handleBoardWithSectionsClick({category:r.category,gridIndex:r.gridIndex,id:r.id})):(s("boardless"===r.type?{event_type:101,clientTrackingParams:i,component:13282,element:36,object_id_str:r.id,view_type:91,view_parameter:3990,aux_data:{board_id:r.id,board_component:3990,board_picker_surface_origin:d,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:r.gridIndex,image_signature:a,is_profile_save:!0,pin_id:c,save_session_id:h,search_query:p}}:{event_type:101,clientTrackingParams:i,component:13282,element:36,object_id_str:r.id,view_type:91,view_parameter:r.category===eh?3988:3989,aux_data:{board_id:r.id,board_component:r.category===eh?3988:3989,board_picker_surface_origin:d,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),board_index:r.gridIndex,image_signature:a,is_profile_save:"boardless"===r.type,pin_id:c,save_session_id:h,search_query:p,source:u}}),l({boardId:r.id,url:r.url,title:r.name||"",type:r.type,imageCoverUrl:r.image_cover_url,privacy:r.privacy,boardPickerSuggestedBoards:JSON.stringify(e.getTopChoiceBoardsAuxData())}))}),ed(e,"handleSearchQueryUpdate",function(t){e.setState(function(e){return eo(eo({},e),{},{searchQuery:t})})}),ed(e,"handleCreateBoardClick",function(t){var r=e.props,n=r.clientTrackingParams,o=r.imageSignature,i=r.logContextEvent,a=r.onBoardCreate,s=r.pinId,l=r.surfaceOriginViewParameter,c=r.surface,d=e.state,u=d.saveSessionId,g=d.searchQuery;i({event_type:101,clientTrackingParams:n,component:13282,element:249,view_type:91,view_parameter:t?87:3132,aux_data:{board_component:t?87:3132,board_picker_surface_origin:l,board_picker_suggested_boards:JSON.stringify(e.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),image_signature:o,pin_id:s,save_session_id:u,search_query:g,source:null!=c?c:m.A.BOARD_PICKER}}),a({title:g})}),ed(e,"handleBoardSuggestionClick",function(t){var r=e.props,n=r.clientTrackingParams,o=r.imageSignature,i=r.logContextEvent,a=r.onBoardCreate,s=r.pinId,l=r.surfaceOriginViewParameter,c=e.state.saveSessionId;i({event_type:101,clientTrackingParams:n,component:13282,element:23,view_type:91,view_parameter:3992,aux_data:{board_picker_surface_origin:l,board_title_suggestions:JSON.stringify(e.getBoardTitleSuggestionsAuxData()),image_signature:o,pin_id:s,save_session_id:c}}),a(t)}),e}if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&ec(r,e),t=[{key:"componentWillUnmount",value:function(){this.removeEventListeners()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.clientTrackingParams,r=e.logContextEvent,n=e.imageSignature,o=e.pinId,i=e.setBoardWithSection,a=e.surfaceOriginViewParameter,s=this.state.saveSessionId;i&&i(null),r({event_type:13,component:13282,clientTrackingParams:t,element:10960,aux_data:{board_picker_surface_origin:a,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),image_signature:n,pin_id:o,save_session_id:s}})}},{key:"componentDidUpdate",value:function(e){var t,r,n=this.state.saveSessionId,o=this.props.clientTrackingParams;!(null!=(t=e.suggestedBoardsShortListResource)&&t.isLoaded)&&null!=(r=this.props.suggestedBoardsShortListResource)&&r.isLoaded&&this.getSuggestedBoardsIds().length>0&&this.props.logContextEvent({event_type:13,clientTrackingParams:o,component:13282,element:1001,aux_data:{pin_id:this.props.pinId,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),save_session_id:n}})}},{key:"removeEventListeners",value:function(){var e=this._container;e&&e.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e,t,r,o,i,s,l,c=this,d=this.props,h=d.accessibilityLabelText,p=d.boardResource,_=d.buttonText,f=d.changeBoardModal,b=d.clientTrackingParams,y=d.customItem,v=d.headerText,m=d.hideAlreadySavedMsg,x=d.imageSignature,A=d.onButtonClick,B=d.paneHeight,O=d.paneWidth,z=d.pinAlreadySavedBoard,C=d.pinId,T=d.requestContext,I=d.sectionText,L=d.showSaveToProfile,E=d.showSearchField,R=d.showCreateBoardButton,F=d.showFlyoutSaveButton,D=d.showSections,N=d.showSectionSaveButton,J=d.suggestedBoardsShortListResource,M=d.surfaceOriginViewParameter,W=d.useStoryboardStyle,U=d.useLegoLayout,$=d.boardFlyoutStyle,q=this.state,Q=q.boardSuggestions,Y=q.isSectionOpen,G=q.saveSessionId,Z=q.searchBoxFocused,ee=q.searchQuery;if(!p)return null;var et=p.isLoaded,er=p.error,en=[];(et&&!er||J&&J.data&&!J.error)&&(en=this.getItems(!!U));var eo=en.filter(function(e){return e&&e.category===eg}).length,ei=eo>3;ei||0!==Q.length||this.getPinBuilderSuggestions();var ea=W?200:322,es=W?214:334,el=B||290,ec=JSON.stringify(this.getTopChoiceBoardsAuxData()),ed=T.isRTL?"BoardsSlideRightRTL":"BoardsSlideLeft",eu="";null!==Y&&(eu=T.isRTL?"BoardsSlideLeftRTL":"BoardsSlideRight");var eh=function(e){return(0,j.jsxs)(n.Fragment,{children:[!U&&(0,j.jsx)(a.cG,{}),(0,j.jsx)(a.az,{dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}},elevation:U&&eo>=3&&en.length>1?"shadowFloating":void 0,height:U?80:52,overflow:"hidden",children:(0,j.jsx)(K,{isBoardCreate:e,onCreateBoardClick:function(t){t.event.stopPropagation(),c.handleCreateBoardClick(e)},useLegoLayout:U})})]})};return(0,j.jsxs)(a.az,{color:"default","data-test-id":"board-picker-flyout",height:W||f?"100%":U?498:439,overflow:"hidden",rounding:200,width:U&&!f?"100%":O,zIndex:S.RG,children:[(0,j.jsx)(u.A,{unsafeCSS:"\n.BoardsSlideLeft {\n  animation: boardFlyoutSlideLeft 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideRight {\n  animation: boardFlyoutSlideRight 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideLeftRTL {\n  animation: boardFlyoutSlideLeftRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n.BoardsSlideRightRTL {\n  animation: boardFlyoutSlideRightRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;\n}\n\n@keyframes boardFlyoutSlideLeft {\n  from {\n    margin-left: 0%;\n  }\n\n  to {\n    margin-left: -100%;\n  }\n}\n\n@keyframes boardFlyoutSlideRight {\n  from {\n    margin-left: -100%;\n  }\n\n  to {\n    margin-left: 0%;\n  }\n}\n\n@keyframes boardFlyoutSlideLeftRTL {\n  from {\n    margin-right: -100%;\n  }\n\n  to {\n    margin-right: 0%;\n  }\n}\n\n@keyframes boardFlyoutSlideRightRTL {\n  from {\n    margin-right: 0%;\n  }\n\n  to {\n    margin-right: -100%;\n  }\n}\n"}),et?null:(0,j.jsx)(a.so,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:U&&!f?360:O,children:(0,j.jsx)(a.y$,{accessibilityLabel:this.props.i18n._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})}),(0,j.jsx)(a.so,{direction:"row",children:et&&(0,j.jsx)("div",{className:Y?ed:eu,children:(0,j.jsx)(a.az,{position:"relative",children:(0,j.jsxs)(a.az,{direction:"row",display:"flex",width:U&&!f?720:(null!=O?O:0)*2,zIndex:new a.rk(0),children:[(0,j.jsxs)(a.so,{alignItems:"stretch",direction:"column",justifyContent:"start",width:U&&!f?360:O,children:[U&&!f&&(0,j.jsx)(a.so,{alignItems:"center",height:64,justifyContent:"center",children:(0,j.jsx)(w,{headingLevel:2,size:"300",textWeight:"bold",children:v||(L?this.props.i18n._('Save', 'PinBetterSave.BoardFlyout.SavePlaceholder', 'flyout header text to indicate save options'):this.props.i18n._('Save to board', 'PinBetterSave.BoardFlyout.SaveToBoardPlaceholder', 'flyout header text'))})}),(null!=E?E:!f)&&(0,j.jsxs)(a.az,{"data-test-id":"search-boards-field-container",height:U?64:"auto",padding:null!=(e=null==$||null==(t=$.searchFieldStyle)?void 0:t.padding)?e:3*!U,paddingX:null!=(r=null==$||null==(o=$.searchFieldStyle)?void 0:o.paddingX)?r:U?4:3,paddingY:null==$||null==(i=$.searchFieldStyle)?void 0:i.paddingY,children:[(0,j.jsx)(X.A,{accessibilityClearButtonLabel:this.props.i18n._('Clear board search text', 'dropdown.searchField.clearButtonLabel', 'clear button label for search field in board picker'),accessibilityLabel:this.props.i18n._('Search through your boards', 'search bar placeholder text', 'search bar placeholder text'),focused:Z,id:"pickerSearchField",onChange:function(e){var t=e.value;return c.handleSearchQueryUpdate(t)},placeholder:this.props.i18n._('Search', 'search bar placeholder text', 'search bar placeholder text'),size:null!=(s=null==$||null==(l=$.searchFieldStyle)?void 0:l.size)?s:"lg",value:ee}),(0,j.jsx)(a.az,{"aria-live":"assertive",display:"visuallyHidden",children:eo?(0,g.$)(this.props.i18n.ngettext('Found a board', 'Found {{boardCount}} boards', eo, 'PinBetterSave.BoardFlyout.BoardFoundsDropdown', 'Text to indicate how many boards were found in the board autocomplete. boardCount: the number of boards created by the user.'),{boardCount:eo.toString()}):this.props.i18n._('No boards found', 'PinBetterSave.BoardFlyout.noBoardFoundsDropdown', 'Text to indicate no boards were found in the board autocomplete')})]}),(0,j.jsxs)(a.az,{ref:this.refHandler,maxHeight:U?el:ea,minHeight:U?290:ea,overflow:"scrollY",role:"list",children:[J&&!J.isLoaded?(0,j.jsx)(a.az,{"data-test-id":"suggestedBoardsContainer",children:(0,j.jsx)(a.so,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:128.5,width:"100%",children:(0,j.jsx)(a.y$,{accessibilityLabel:this.props.i18n._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})})}):null,y,en.map(function(e,t){return"header"===e.type?(0,j.jsx)(P,{boardPickerSuggestedBoards:ec,clientTrackingParams:b,headingLevel:2,imageSignature:x,index:t,item:e,pinId:C,saveSessionId:G,surfaceOriginViewParameter:M,useLegoLayout:U},"".concat(e.title)):(0,j.jsx)(a.az,{children:(0,j.jsx)(k,{accessibilityLabelText:h,board:e,boardPickerSuggestedBoards:ec,buttonText:_,clientTrackingParams:b,displayAlreadySavedMsg:z&&z.id===e.id&&!m,gridIndex:t,imageSignature:x,onButtonClick:A,onClick:function(e){c.handleBoardClick({board:e,toggleSections:D&&!!e.section_count})},pinId:C,saveSessionId:G,shouldOpenSections:D,showFlyoutSaveButton:F,showSaveToProfile:L,surfaceOriginViewParameter:M,useLegoLayout:U})},"".concat(e.category,"-").concat(e.id))}),!ei&&Q.length>0&&(0,j.jsx)(V,{inWebRepinFlowExp:U,onClick:this.handleBoardSuggestionClick,pinBuilderSuggestions:Q})]}),R&&eh(!0)]}),Y&&(0,j.jsxs)(a.az,{direction:"column",display:"flex",marginBottom:2*!!U,width:U&&!f?360:O,children:[(0,j.jsxs)(a.so,{alignContent:"center",alignItems:"center",direction:"row",justifyContent:"center",children:[(0,j.jsx)(a.VP,{span:2,children:(0,j.jsx)(a.az,{alignContent:"center",alignItems:"center",display:"flex",justifyContent:"start",marginStart:3,children:(0,j.jsx)(a.K0,{accessibilityLabel:"Back button",icon:"chevron-left",iconColor:"default",onClick:this.handleBack,size:"sm"})})}),(0,j.jsx)(a.VP,{span:8,children:(0,j.jsx)(a.so,{alignItems:"center",height:U?64:52,justifyContent:"center",children:(0,j.jsx)(w,{headingLevel:2,size:"300",textWeight:"bold",children:I||(U?this.props.i18n._('Save Pin to', 'PinBetterSave.BoardFlyout.SectionHeader', 'Header for section header'):this.props.i18n._('Choose section', 'Header for section header', 'Header for section header'))})})}),(0,j.jsx)(a.VP,{span:2,children:(0,j.jsx)(a.az,{})})]}),!U&&(0,j.jsx)(a.cG,{}),(0,j.jsx)(a.az,{maxHeight:U?el:es,minHeight:U?354:es,overflow:"scrollY",children:en?(0,j.jsx)(n.Fragment,{children:en&&en.map(function(e){return"header"===e.type?null:(0,j.jsx)(a.az,{role:"list",children:e.isOpen&&(0,j.jsxs)(n.Fragment,{children:[U&&(0,j.jsx)(a.az,{marginStart:4,marginTop:2,paddingY:1,children:(0,j.jsx)(w,{headingLevel:3,size:"100",children:c.props.i18n._('Board', 'PinBetterSave.BoardFlyout.BoardPickerTitle', 'board title on section picker')})}),(0,j.jsx)(k,{board:e,boardPickerSuggestedBoards:ec,buttonText:_,displayAlreadySavedMsg:z&&z.id===e.id,gridIndex:e.gridIndex,isSectionOpen:!0,onButtonClick:A,onClick:function(e){c.handleBoardClick({board:e,toggleSections:!1})},saveSessionId:G,shouldOpenSections:!1,showFlyoutSaveButton:F,useLegoLayout:U}),(0,j.jsx)(H,{board:e,buttonText:_,onButtonClick:A,onClick:c.handleSectionClick,showSectionSaveButton:N,useLegoLayout:U})]})},"".concat(e.category,"-").concat(e.id))})}):null}),R&&!f&&eh(!1)]})]})})})})]})}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eu(n.key),n)}}(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}(n.PureComponent);function e_(e){var t=(0,s.o)().logContextEvent,r=(0,d.A)(),n=(0,h.A)().checkExperiment;return(0,j.jsx)(ep,eo(eo({},e),{},{checkExperiment:n,i18n:r,logContextEvent:t,requestContext:(0,p._8)()}))}function ef(e,t,r){var n=e.advertiser,o={};if(r&&r.user&&r.user.username&&r.id!==(t.isAuth?t.id:void 0)&&(o.orbacActingAs=r,o.username=r.user.username),t&&n){var i=e.advertiser;if(t.isAuth&&i.is_impersonation)return eo({hasMUA:i.owner_user_id!==t.id,advertiser_id:i.id,username:i.owner_user_id},o);if(t.isAuth&&i.owner_user_id!==t.id)return eo({hasMUA:!0,advertiser_id:i.id,username:i.owner_user_id},o);if(t.isAuth&&i.owner_user_id===t.id)return{hasMUA:!1,advertiser_id:i.id,username:"me"}}return eo({advertiser_id:void 0,hasMUA:void 0},o)}function eb(e){var t=e.advertiser_id,r=e.hasMUA,n=e.boardFilter,o=void 0===n?"all":n,i=e.username,a=eo(eo({field_set_key:"board_picker",filter:r?"protected":o},i?{username:i}:Object.freeze({})),t?{advertiser_id:t}:{});return e.orbacActingAs&&e.orbacActingAs.user&&e.orbacActingAs.user.username&&(a=eo(eo({},a),{},{username:e.orbacActingAs.user.username,orbac_subject_id:e.orbacActingAs.id,filter:o})),a}function ey(e,t){return function(r,n){return r((0,_.Q5)("BoardPickerBoardsResource",eb(ef(n(),e,t))))}}function ev(e){var t=(0,c.A)(),r=(0,o.d4)(function(r){return ef(r,t,e.orbacActingAs)}),n=eo(eo({},e),r),i=(0,f.A)({name:"BoardPickerBoardsResource",options:eb(n)});return(0,j.jsx)(e_,eo(eo({},n),{},{boardResource:i}))}function em(e){var t=(0,y.A)(),r=(0,c.A)(),n=(0,v.H7)(r,t);return(0,j.jsx)(ev,eo(eo({},e),{},{orbacActingAs:n?t:void 0}))}function eS(e){var t=(0,f.A)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:e.pinId,shortlist_length:2,num_shortlist_suggestions:2}}),r=(0,f.A)({name:"ApiResource",options:{url:"/v3/pins/".concat(e.pinId,"/"),field_sets:["pin.pinned_to_board()"]},noCache:!0}).data;return(0,j.jsx)(e_,eo(eo({},e),{},{pinAlreadySavedBoard:null==r?void 0:r.pinned_to_board,suggestedBoardsShortListResource:t}))}ed(ep,"defaultProps",{clientTrackingParams:void 0,paneWidth:320,showCreateBoardButton:!0,showFlyoutSaveButton:!0,showSections:!0,showSectionSaveButton:!0,useLegoLayout:!0})},394841(e,t,r){var n=r(460657),o=r(705006),i=r(850028),a=r(879667),s=function(e){var t=e.collaborator_count,r=e.useLegoLayout,o=e.type;return r?(0,a.jsx)(n.az,{marginEnd:2*!!t,children:(0,a.jsx)(i.A,{type:o})}):(0,a.jsx)(i.A,{type:o})};t.A=function(e){var t,r=e.board,l=e.showCollaborativeIcon,c=e.showPrivateIcon,d=e.showProtectedIcon,u=e.showSectionsIcon,g=e.useLegoLayout,h=(null==r||null==(t=r.collaborating_users)?void 0:t.length)||0;return l||c||d||u?(0,a.jsxs)(n.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{paddingLeft:8}},"data-test-id":"board-picker-row-icon-list-box",direction:"row",display:"flex",marginEnd:5*!g,children:[c&&(0,a.jsx)(s,{collaborator_count:h,type:"secret",useLegoLayout:g}),d&&(0,a.jsx)(s,{collaborator_count:h,type:"protected",useLegoLayout:g}),l&&(g?(0,a.jsx)(o.A,{board:r,isCompact:!0,ownerOnly:!1}):(0,a.jsx)(i.A,{type:"group"})),u&&(0,a.jsx)(i.A,{type:"sections"})]}):null}},506698(e,t,r){var n=r(460657),o=r(879667);t.A=function(e){var t=e.image_url,r=e.naturalHeight,i=e.naturalWidth;return(0,o.jsx)(n.az,{"aria-hidden":"true",height:48,marginBottom:1,marginEnd:2,marginTop:1,overflow:"hidden",width:48,children:(0,o.jsx)(n.n1,{height:48,rounding:200,wash:!0,width:48,children:(0,o.jsx)(n._V,{alt:"",naturalHeight:r,naturalWidth:i,src:t})})})}},705006(e,t,r){r.d(t,{A:function(){return c}});var n=r(906938),o=r(837855),i=r(879667);function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function l(e){var t,r,n,o,i,a=null!=(t=null!=(r=null==e?void 0:e.imageMediumUrl)?r:null==e?void 0:e.image_medium_url)?t:"",s=null!=(n=null==e?void 0:e.avatar_color_index)?n:void 0;return{name:null!=(o=null!=(i=null==e?void 0:e.fullName)?i:null==e?void 0:e.full_name)?o:"",color:s,src:"https://s.pinimg.com/images/user/default_75.png"===a?void 0:a}}function c(e){var t=e.board,r=e.forceViewer,s=e.isCompact,c=e.ownerOnly,d=(0,o.A)(),u=c?[l(null==t?void 0:t.owner)]:(function(e,t,r){var n=null!=e?e:{},o=n.collaborated_by_me,i=n.collaborating_users,s=n.owner,l=null!=i?i:[],c=[s];if(o||r){var d=l.findIndex(function(e){return t.isAuth&&e.id===t.id});if(-1!==d){var u=l.splice(d,1)[0];c.push(u)}else c.push(t)}var g=a(l).sort(function(e,t){var r,n,o,i;return(null!=(r=e.full_name)?r:"")>(null!=(n=t.full_name)?n:"")?1:(null!=(o=t.full_name)?o:"")>(null!=(i=e.full_name)?i:"")?-1:0});return[].concat(c,a(g))})(t,d,r).map(l);return(0,i.jsx)(n.Z7,{collaborators:u,size:s?"xs":"sm"})}},666240(e,t,r){r.d(t,{A:function(){return a}});var n=r(157203),o=r(460657),i=r(879667);function a(e){var t=e.accessibilityClearButtonLabel,r=e.accessibilityLabel,a=e.focused,s=e.id,l=e.onBlur,c=e.onChange,d=e.onFocus,u=e.placeholder,g=e.value,h=e.size,p=(0,n.useRef)(null);return(0,n.useEffect)(function(){if(a){var e=p.current;window.requestAnimationFrame(function(){var t=e&&e.querySelector("input");t instanceof HTMLInputElement&&t.focus()})}},[a]),(0,i.jsx)(o.az,{ref:p,children:(0,i.jsx)(o.Lw,{accessibilityClearButtonLabel:t,accessibilityLabel:r,id:s,onBlur:l,onChange:c,onFocus:d,placeholder:u,size:void 0===h?"lg":h,value:g})})}},850028(e,t,r){var n=r(460657),o=r(370714),i=r(879667);t.A=function(e){var t=e.type,r=(0,o.A)(),a={group:{accessibilityLabel:r._('group board', 'Board picker group board icon', 'Board picker group board icon'),icon:"people"},protected:{accessibilityLabel:r._('protected board', 'Board picker protected board icon', 'Board picker protected board icon'),icon:"shield-check"},secret:{accessibilityLabel:r._('secret board', 'Board picker secret board icon', 'Board picker secret board icon'),icon:"lock"},sections:{accessibilityLabel:r._('board with sections', 'Board picker board with sections icon', 'Board picker board with sections icon'),icon:"chevron-right"},sectionsInline:{accessibilityLabel:r._('board with sections', 'Board picker board with sections icon', 'Board picker board with sections icon'),icon:"chevron-down"}}[t],s="sections"===t||"sectionsInline"===t;return(0,i.jsx)(n.az,{marginStart:+!!s,children:(0,i.jsx)(n.az,{marginStart:2*!!s,children:"sections"===t||"sectionsInline"===t?(0,i.jsx)(n.In,{accessibilityLabel:a.accessibilityLabel,color:"default",icon:a.icon,size:"12"}):(0,i.jsx)(n.In,{accessibilityLabel:a.accessibilityLabel,color:"default",icon:a.icon,size:16})})})}}}]);