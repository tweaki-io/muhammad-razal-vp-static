"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["79502"],{324785(e,r,t){t.d(r,{Q:function(){return u}});var n=t(157203),i=t(467780),o=["ar","he"],u=function(){var e=(0,i._8)().locale;return{isRTL:(0,n.useMemo)(function(){var r=(null!=e?e:"").split("-")[0];return o.includes(r)},[e])}}},383965(e,r,t){t.d(r,{$5:function(){return v},B0:function(){return y},Fo:function(){return _},Q7:function(){return E},Rl:function(){return d},YG:function(){return f},_s:function(){return S},lE:function(){return h},n9:function(){return P},oO:function(){return l},xR:function(){return b},zZ:function(){return m}});var n=t(157203),i=t(106386),o=t(18841),u=t(385384),a=t(663428),s=t(212180),c=Date.now(),l=function(){return(0,s.kF)()},p=function(){return Date.now()-c},d=function(){return(0,i.d4)(function(e){var r,t;return null!=(r=null==(t=e.currentUserTracker)?void 0:t.storageAccessAllowed)?r:o.Sf})},f=function(){return(0,i.d4)(function(e){var r,t;return null!=(r=null==(t=e.currentUserTracker)?void 0:t.visitedUnauthPages)?r:o.Ic})},y=function(){return(0,i.d4)(function(e){var r,t;return null!=(r=null==(t=e.currentUserTracker)?void 0:t.closeupPins)?r:o.zF})},m=function(){return(0,i.d4)(function(e){var r,t;return null!=(r=null==(t=e.currentUserTracker)?void 0:t.completedSearches)?r:o.xg})},v=function(){return(0,i.d4)(function(e){var r,t;return null!=(r=null==(t=e.currentUserTracker)?void 0:t.clickthroughPins)?r:o.vC})},b=function(){return(0,i.d4)(function(e){var r,t;return null!=(r=null==(t=e.currentUserTracker)?void 0:t.savedPins)?r:o.BP})},g=function(){return(0,i.d4)(function(e){var r,t;return null!=(r=null==(t=e.currentUserTracker)?void 0:t.revisitationState)?r:(0,o.Cj)()})},T=function(){var e=(0,i.wA)();return(0,n.useCallback)(function(r){e((0,u.gv)({viewType:r}))},[e])},h=function(){var e=(0,i.wA)();return(0,n.useCallback)(function(r,t){e((0,u.z9)(r,t))},[e])},P=function(){var e=(0,i.wA)();return(0,n.useCallback)(function(r){e((0,u.jx)(r))},[e])},_=function(){var e=(0,i.wA)();return(0,n.useCallback)(function(r){e((0,u.ab)(r))},[e])},E=function(){var e=(0,i.wA)();return(0,n.useCallback)(function(r){e((0,u.Ww)(r))},[e])},S=function(){var e=(0,i.wA)();return(0,n.useCallback)(function(){e((0,u.px)())},[e])},w=function(){var e=(0,i.wA)();return(0,n.useCallback)(function(r){e((0,u.vK)(r))},[e])},A=function(){var e=(0,i.wA)();return(0,n.useCallback)(function(r){e((0,u.rh)(r))},[e])},I=function(){var e=(0,i.wA)(),r=g();return(0,n.useCallback)(function(){var t=(0,a.A)(r),n=t.state;t.wasUpdated&&e((0,u.rh)(n))},[e,r])},O=function(){var e=(0,i.wA)(),r=g();return(0,n.useCallback)(function(){e((0,u.rh)({sessionTimestamps:r.sessionTimestamps}))},[e,r])};r.Ay=function(){var e=(0,i.d4)(function(e){var r,t;return null!=(r=null==(t=e.currentUserTracker)?void 0:t.isAuthenticated)?r:o.TI}),r=(0,i.d4)(function(e){var r,t;return null!=(r=null==(t=e.currentUserTracker)?void 0:t.country)?r:o.jC}),t=(0,i.d4)(function(e){var r,t;return null!=(r=null==(t=e.currentUserTracker)?void 0:t.region)?r:o.t9}),n=d(),u=f(),a=y(),s=m(),c=v(),D=(0,i.d4)(function(e){var r,t;return null!=(r=null==(t=e.currentUserTracker)?void 0:t.downloadedPinsCount)?r:o.Hy}),k=b(),C=(0,i.d4)(function(e){var r,t;return null!=(r=null==(t=e.currentUserTracker)?void 0:t.isQUS)?r:o.fY}),j=g(),x=(0,i.d4)(function(e){var r,t;return null!=(r=null==(t=e.currentUserTracker)?void 0:t.daysSinceLastRevisitation)?r:o.sw}),N=(0,i.d4)(function(e){var r,t;return null!=(r=null==(t=e.currentUserTracker)?void 0:t.isIAB)?r:o.i6}),R=(0,i.d4)(function(e){var r,t;return null!=(r=null==(t=e.currentUserTracker)?void 0:t.landingPageViewType)?r:o.pk}),U=h(),G=P(),L=_(),F=E(),V=S(),M=w(),H=A(),Q=I(),W=O();return{isAuthenticated:e,isStorageAllowed:n,isQUS:C,isIAB:N,landingPageViewType:R,setLandingPageViewType:T(),closeupPins:a,visitedPages:u,setVisitedPage:U,completedSearches:s,setCompletedSearch:G,removeCompletedSearch:L,clickthroughPins:c,setClickthroughPin:F,downloadCount:D,updateDownloadCount:V,savedPins:k,setSavedPins:M,revisitationState:j,daysSinceLastRevisitation:x,updateRevisitation:H,trackSessionStart:Q,trackSessionEnd:W,getPinImpressionCount:l,getSessionDuration:p,country:r,region:t}}},385384(e,r,t){t.d(r,{KK:function(){return i},Ww:function(){return s},ab:function(){return a},gv:function(){return d},jx:function(){return u},px:function(){return c},rh:function(){return p},vK:function(){return l},z9:function(){return o}});var n="local",i={ADD_VISITED_PAGE:"ADD_VISITED_PAGE",ADD_COMPLETED_SEARCH:"ADD_COMPLETED_SEARCH",REMOVE_COMPLETED_SEARCH:"REMOVE_COMPLETED_SEARCH",ADD_CLICKTHROUGH_PIN:"ADD_CLICKTHROUGH_PIN",UPDATE_DOWNLOAD_COUNT:"UPDATE_DOWNLOAD_COUNT",UPDATE_SAVED_PINS:"UPDATE_SAVED_PINS",UPDATE_REVISITATION:"UPDATE_REVISITATION",SET_LANDING_PAGE_VIEW_TYPE:"SET_LANDING_PAGE_VIEW_TYPE"},o=function(e,r){return{type:i.ADD_VISITED_PAGE,payload:{path:e,pageType:r,storageType:n}}},u=function(e){return{type:i.ADD_COMPLETED_SEARCH,payload:{search:e,storageType:n}}},a=function(e){return{type:i.REMOVE_COMPLETED_SEARCH,payload:{query:e,storageType:n}}},s=function(e){return{type:i.ADD_CLICKTHROUGH_PIN,payload:{pin:e,storageType:n}}},c=function(){return{type:i.UPDATE_DOWNLOAD_COUNT,payload:{storageType:n}}},l=function(e){return{type:i.UPDATE_SAVED_PINS,payload:{pins:e,storageType:n}}},p=function(e){return{type:i.UPDATE_REVISITATION,payload:{revisitation:e,storageType:n}}},d=function(e){var r=e.viewType;return{type:i.SET_LANDING_PAGE_VIEW_TYPE,payload:{viewType:r}}}},548719(e,r,t){function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function i(e,r){var t=e.sessionTimestamps,n=Date.now()-864e5*r;return t.filter(function(e){return e>=n}).length}function o(e,r){var t=Date.now(),i=[].concat(function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return n(e,void 0);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t]);return i.length>r?i.slice(-r):i}t.d(r,{A:function(){return i},c:function(){return o}})},663428(e,r,t){var n=t(18841),i=t(548719);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach(function(r){var n,i;n=r,i=t[r],(n=function(e){var r=function(e,r){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=o(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==o(r)?r:r+""}(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}r.A=function(e){return e&&e.sessionTimestamps&&!(e.sessionTimestamps.length<1)&&e.ts?new Date().getTime()-e.ts>n.H3?{state:a(a({},e),{},{sessionTimestamps:(0,i.c)(e.sessionTimestamps,n.eb)}),wasUpdated:!0}:{state:e,wasUpdated:!1}:{state:(0,n.Cj)(),wasUpdated:!0}}},549445(e,r,t){t.d(r,{A:function(){return u}});var n=t(805454);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function u(e){var r,t,u,a,s,c=(u=(t={experimentsClient:(0,n.A)(),skipActivation:null!=(r=null==e?void 0:e.skipActivation)&&r}).experimentsClient,a=t.skipActivation,(s=(0,u.checkExperiment)("web_masonry_v2",{dangerouslySkipActivation:a})).group?function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach(function(r){var n,o;n=r,o=t[r],(n=function(e){var r=function(e,r){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=i(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==i(r)?r:r+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({expName:"web_masonry_v2"},s):{expName:"",anyEnabled:!1,group:""}),l=c.expName,p=c.anyEnabled,d=c.group;return{expName:l,anyEnabled:p,group:d,isMeasureAllEnabled:"enabled_measure_all"===d||"enabled_measure_all_impression_fix"===d,isImpressionFixEnabled:"control_impression_fix"===d||"enabled_impression_fix"===d||"enabled_measure_all_impression_fix"===d}}},212180(e,r,t){t.d(r,{bi:function(){return A},g$:function(){return I},kF:function(){return _}});var n=t(157203),i=t(324785),o=t(186122),u=t(549445),a=t(998619),s=t(467780),c=t(991224),l=t(215122),p=t(759120),d=t(947519),f=t(29739),y=t(425347),m=t(876808),v=["children"];function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function T(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?g(Object(t),!0).forEach(function(r){h(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function h(e,r,t){var n;return(n=function(e,r){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=b(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"),(r="symbol"==b(n)?n:n+"")in e)?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var P=0,_=function(){return P},E=function(){P+=1},S={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Notification:{impressionType:"notificationDetailImpressions",idType:"newsIdStr",eventType:4111},NotificationFeed:{impressionType:"notificationFeedImpressions",idType:"newsIdStr",eventType:4110},EditorialBoard:{impressionType:"editorialBoardImpressions",idType:"boardIdStr",eventType:3700},VaseAnnotation:{impressionType:"vaseAnnotationImpressions",idType:"vaseAnnotationUrlStr",eventType:16444}},w=function(e){var r=e.events,t=e.startTime,n=e.endTime;return(null==r?void 0:r.filter(function(e){return e>=t&&e<=n}))||[]};function A(e){var r=e.carouselData,t=e.closeupImpressionType,v=e.closeupNavigationType,b=e.componentType,g=e.contextLogData,P=e.clientTrackingParams,_=e.duploShouldTrackPinEvents,A=e.elementType,I=e.impressionAuxFields,O=e.inImpressionExp,D=e.impressionType,k=e.impressionsFramework,C=e.isPaused,j=e.loggingId,x=e.objectIdStr,N=e.slotIndex,R=e.trackCarousel,U=e.viewData,G=e.viewParameter,L=e.viewType,F=e.isPromoted,V=e.storyPinProductEventData,M=(0,o.o)().logContextEvent,H=(0,l.y)().logMrcVideoAdEventOnPlay,Q=((0,p._1)()||{}).addImpression,W=(0,d.xI)().logStat,B=(0,f.A)(),q=(0,c.qJ)(),J=(0,i.Q)().isRTL,K=k||a.A,Y=(0,n.useRef)(null),z=(0,n.useRef)(function(e){});z.current=function(e){var n,i,o,u,a,s,c,l,p=S[D],d=p.idType,f=T(T(h(h(h(h(h({clientTrackingParams:P,endTime:e.endTime},d,j),"slotIndex",N),"time",e.startTime),"renderDuration",e.endTime-e.startTime),"type",t),I),{},{forcedExit:"removed"===e.forcedExit?0:void 0});if("Pin"===D){E();var y,m,O=[],k=e.visibleEvents||new Map,C=e.hiddenEvents||new Map;if((I&&I.isPromoted||F)&&[1,50,80,2,102].forEach(function(r){var t=w({events:k.get(r),startTime:e.startTime,endTime:e.endTime}),n=w({events:C.get(r),startTime:e.startTime,endTime:e.endTime});t.forEach(function(e){O.push({type:r,time:e||0,visible:!0})}),n.forEach(function(e){O.push({type:r,time:e||0,visible:!1})})}),f=T(T({},f),{},{pinCellWidth:e.pinCellWidth||0,pinCellHeight:e.pinCellHeight||0,windowWidth:null==(y=window)?void 0:y.innerWidth,windowHeight:null==(m=window)?void 0:m.innerHeight,visibleEvents:O.sort(function(e,r){return e.time-r.time})}),Y.current){var K=Y.current.getBoundingClientRect(),z=window.scrollX||document.documentElement.scrollLeft,$=K.left+z;g=T(T({},g||{}),{},{number_of_columns:f.windowWidth&&f.pinCellWidth?Math.round((f.windowWidth-(J&&q?0:B))/f.pinCellWidth):null}),f.columnIndex=f.pinCellWidth?Math.round(($-(J&&q?0:B))/f.pinCellWidth):void 0}null!=I&&I.nearDupSignature&&Q&&b&&[13007,13176,68].includes(b)&&Q(I.nearDupSignature)}var X={component:b,object_id_str:x,view_type:L,view_data:U||{},view_parameter:G};if(R)r&&R&&M(T(T({event_type:7352,event_data:{pinCarouselSlotImpressions:[T(T({},f),"canonical"===r.type?{carouselDataId:Number(null!=(n=r.carouselId)?n:0),slotIndex:r.index,carouselSlotId:(null==(i=r.carouselSlots)?void 0:i[null!=(o=r.index)?o:0])&&Number(r.carouselSlots[null!=(u=r.index)?u:0].slotId)}:{carouselDataId:Number(null!=(a=r.id)?a:0),carouselSlotId:(null==(s=r.carousel_slots)?void 0:s[null!=(c=r.index)?c:0])&&Number(r.carousel_slots[null!=(l=r.index)?l:0].id),slotIndex:r.index})]}},X),{},{aux_data:T({},g)}));else{var Z=T(T({clientTrackingParams:P,event_type:p.eventType},X),{},{element:A,event_data:T(h({},p.impressionType,"Story"===D?f:[f]),V?{storyPinProductEventData:V}:{}),aux_data:T({closeup_navigation_type:v},g)});M(Z),H(Z)}_&&W("log_pin_impression")};var $=(0,u.A)({skipActivation:!0}),X=$.expName,Z=$.group,ee=(0,c.Ay)(),er=(0,m.AJ)(),et=(0,s._8)().isAuthenticated,en=(0,n.useCallback)(function(){var e=!1;try{var r=Y.current;if(r instanceof HTMLElement&&(!F||r.getElementsByTagName("img").length>0)){var t=K.start(r);t.onExitViewport(z.current).setDebugId(j||"unknown"),_&&t.onEnterViewport(function(){W("log_pin_impression_track_enter_viewport")}),e=!0,Z&&(0,y.GV)("webapp.masonry.trackImpression",{tags:{callsite:"app_packages_useImpressionTracker",deviceType:ee,experimentName:X,group:Z,handlerId:er,isAuthenticated:et,slotIndex:null!=N?N:"unknown"}})}}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}_&&W("log_pin_impression_track",{didStartTracking:e})},[Y.current]);return(0,n.useEffect)(function(){return O&&!K.inExperiment&&K.setExperimentStatus(!0),C||en(),function(){var e=Y.current;e instanceof HTMLElement&&(!F||e.getElementsByTagName("img").length>0)&&K.stop(e)}},[C,en]),Y}var I=function(e){return(0,e.children)({impressionTrackerRef:A(function(e,r){if(null==e)return{};var t,n,i=function(e,r){if(null==e)return{};var t={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==r.indexOf(n))continue;t[n]=e[n]}return t}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],-1===r.indexOf(t)&&({}).propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}(e,v))})}},759120(e,r,t){t.d(r,{_1:function(){return m},k0:function(){return b}});var n=t(157203),i=t(245110),o=t(497398),u=t(4513),a=t(805454),s=t(395394),c=t(425347),l=t(879667);function p(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return d(e,void 0);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}var f=(0,u.A)("CloseupNearDupSigsTracker"),y=f.Provider,m=f.getMaybe,v=function(e){var r=e.group,t=e.children,u=(0,s.V2)(),a=(0,n.useRef)([]),d=(0,n.useRef)(new Set),f=(0,n.useRef)([]),m=(0,n.useRef)(new Set),v=(0,n.useRef)(null),b=(0,n.useMemo)(function(){return r.includes("enabled_10")?10:r.includes("enabled_20")?20:35},[r]),g=(0,i.YQ)(function(){r.includes("session_sync")&&(u.setItem(o.kA,a.current),u.setItem(o.Ex,f.current))},500),T=(0,n.useCallback)(function(){if(r.includes("session_sync")){var e=Date.now(),t=u.getItem(o.kA),n=u.getItem(o.Ex);if(t)try{Array.isArray(t)&&t.every(function(e){return"string"==typeof e})&&(a.current=t.slice(-5),d.current=new Set(a.current))}catch(e){(0,c.GV)("closeup_page.near_dup.session_storage_sync.closeup.fail",{sampleRate:1})}if(n)try{Array.isArray(n)&&n.every(function(e){return"string"==typeof e})&&(f.current=n.slice(-b),m.current=new Set(f.current))}catch(e){(0,c.GV)("closeup_page.near_dup.session_storage_sync.impression.fail",{sampleRate:1})}(0,c.N9)("closeup_page.near_dup.session_storage_sync.success",Date.now()-e,{sampleRate:.1,tags:{status:"success"}})}},[a,f,u,r,b]),h=(0,n.useCallback)(function(e){if(m.current.has(e)&&(f.current=f.current.filter(function(r){return r!==e})),f.current.length>=b){var r=f.current.shift();r&&m.current.delete(r)}m.current.add(e),f.current.push(e)},[b]),P=(0,n.useCallback)(function(e){if(d.current.has(e)&&(a.current=a.current.filter(function(r){return r!==e})),a.current.length>=5){var r=a.current.shift();r&&d.current.delete(r)}d.current.add(e),a.current.push(e),g()},[g]),_=(0,n.useCallback)(function(e){if(v.current===e)return[];var r=Date.now();0===a.current.length&&0===f.current.length&&T();var t=Array.from(new Set([].concat(p(f.current),p(a.current))));return v.current=e,(0,c.N9)("closeup_page.near_dup.get_tracked_sigs.success",Date.now()-r,{sampleRate:.1,tags:{status:"success"}}),t},[T]);(0,n.useEffect)(function(){return g},[g]);var E=(0,n.useMemo)(function(){return{addImpression:h,addCloseup:P,getTrackedNearDupSigs:_}},[h,P,_]);return(0,l.jsx)(y,{value:E,children:t})},b=function(e){var r=e.children,t=(0,(0,a.A)().checkExperiment)("web_closeup_rabbit_hole_dedup"),n=t.anyEnabled,i=t.group;return!n||!i||i.includes("pwt")?(0,l.jsx)(y,{value:void 0,children:r}):(0,l.jsx)(v,{group:i,children:r})}},947519(e,r,t){t.d(r,{J0:function(){return f},Yj:function(){return d},aR:function(){return y},xI:function(){return l}});var n=t(805454),i=t(467780),o=t(991224),u=t(425347);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}var c=function(e){var r=e.checkExperiment,t=e.requestContext,n=r("auth_mweb_graphql_pin_page",{dangerouslySkipActivation:!0}).group;return{logStat:function(e,r){return(0,u.GV)("webapp.graphql.debug_auth_mweb_graphql_pin_page",{sampleRate:1,tags:function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach(function(r){var n,i;n=r,i=t[r],(n=function(e){var r=function(e,r){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=a(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==a(r)?r:r+""}(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({event:e,group:n,browser:null==t?void 0:t.userAgent.browserName,platform:null==t?void 0:t.userAgent.platform},r)})}}},l=function(){var e=(0,i._8)(),r=(0,o.qJ)(),t=(0,n.A)().checkExperiment,u=e.isAuthenticated&&!r,a=f({checkExperiment:t,isAuthenticated:e.isAuthenticated,isDesktop:r});return u&&a.isPartOfExperiment?c({checkExperiment:t,requestContext:e}):{logStat:function(){}}},p=0,d=function(e){var r=e.checkExperiment;if(e.isAuthMweb){var t=c({checkExperiment:r}).logStat;(p+=1)<10&&t("repin_".concat(p))}};function f(e){var r=e.checkExperiment,t=e.isDesktop,n=e.isAuthenticated,i=e.skipActivation;if(!n)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1};if(t){var o=r("auth_dweb_graphql_pin_page",i?{dangerouslySkipActivation:!0}:void 0).anyEnabled;return{isGraphQLEnabledForRelatedPins:o,isGraphQLEnabledInGeneral:o,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1}}var u=r("auth_mweb_graphql_pin_page",i?{dangerouslySkipActivation:!0}:void 0),a=u.anyEnabled;switch(u.group){case"control":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};case"enabled":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};case"enabled_prefetch_story_pin_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!0};case"enabled_prefetch_closeup_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!0,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};default:return{isGraphQLEnabledInGeneral:a,isGraphQLEnabledForRelatedPins:a,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1}}}function y(){return f({checkExperiment:(0,n.A)().checkExperiment,isDesktop:(0,o.qJ)(),isAuthenticated:(0,i._8)().isAuthenticated})}}}]);