"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["6464"],{690870(e,t,n){n.d(t,{D2:function(){return S},be:function(){return y},ee:function(){return m},fO:function(){return x},xq:function(){return b},zC:function(){return g}});var r=n(157203),i=n(550247),o=n(805454),u=n(467780),c=n(792307),a=n(982432),s=n(3210),l=n(991224);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,u,c=[],a=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{if(!a&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw i}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d="dark",v="light",h="auto",m="rgba(17, 17, 17, 1)",b="rgba(17, 17, 17, 0)",y="rgb(43, 43, 43)",g="#767676",x="rgba(0,0,0, 0.8)",w=function(){var e=(0,c.y1)().getItem(i.NR);return e===d||e===v||e===h?e:v},E=function(){return"u">typeof window&&null!=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches},_=function(e,t){return"".concat(t?"dweb":"mweb",".dark_mode.").concat(e)};function S(){var e=(0,u._8)(),t=e.theme,n=e.isAuthenticated,p=(0,l.qJ)(),m=(0,l.M)(),b=(0,l.wI)(),y=(0,o.A)().checkExperiment,g=n&&(0,a.A)(i.NR)&&(m||b||p&&y("dweb_dark_mode").anyEnabled),x=g&&t===d,S=f((0,r.useState)(function(){return x?d:v}),2),O=S[0],I=S[1],j=f((0,r.useState)(!1),2),k=j[0],R=j[1],A=g&&(x||O===d||O===h&&k);return(0,r.useEffect)(function(){var e=w();I(e),e===h&&R(E())},[n]),(0,r.useEffect)(function(){g&&A&&(document.body.style.backgroundColor="var(--sema-color-background-default)")},[g,A]),(0,r.useEffect)(function(){if(O===h&&"u">typeof window&&null!=window.matchMedia){var e=window.matchMedia("(prefers-color-scheme: dark)"),t=function(e){R(e.matches)};return e.addEventListener("change",t),function(){return e.removeEventListener("change",t)}}},[O]),{isDarkMode:A,isDarkModeSupported:g,enableMode:function(e){if(e===h){var t=E();R(t),(0,c.y1)().setItem(i.NR,h),(0,s.PM)(_(t?"enable":"disable",p))}else e===d?((0,c.y1)().setItem(i.NR,d),(0,s.PM)(_("enable",p))):((0,c.y1)().setItem(i.NR,v),(0,s.PM)(_("disable",p)));I(e),window.location.reload()},followsSystemSetting:O===h}}},847505(e,t,n){n.d(t,{IO:function(){return A},Ip:function(){return w},PJ:function(){return O},QR:function(){return E},WQ:function(){return x},if:function(){return j},j6:function(){return k},lP:function(){return C},nA:function(){return _},oe:function(){return S},uG:function(){return R},wj:function(){return I}});var r=n(285845),i=n(194545),o=n(368114),u=n(425347);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t,n){return t=d(t),function(e,t){if(t&&("object"==v(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e,f()?Reflect.construct(t,n||[],d(e).constructor):t.apply(e,n))}function s(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function l(e){var t="function"==typeof Map?new Map:void 0;return(l=function(e){if(null===e||!function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(f())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&p(i,n.prototype),i}(e,arguments,d(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)})(e)}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function p(e,t){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}(r.key),r)}}function b(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var y=b(function e(t){var n=t.name,r=t.placedExperienceId,i=t.message;h(this,e),this.name=n,this.placedExperienceId=r,this.message=i},[{key:"log",value:function(){o.$1.warn("[ExperienceSessions] - Warning: ".concat(this.name," for experience ").concat(this.placedExperienceId," - ").concat(this.message),{placedExperienceId:this.placedExperienceId})}}]),g=function(e){function t(e){var n,r=e.name,i=e.placedExperienceId,o=e.customMessage;return h(this,t),(n=a(this,t,[o])).name=r,n.placedExperienceId=i,Object.setPrototypeOf(n,t.prototype),n}return s(t,e),b(t)}(l(Error)),x=function(e){function t(e){var n=e.placedExperienceId,r=e.customMessage;h(this,t);var i="Error occurred while creating an IntersectionObserver for experience with id ".concat(n,".");return a(this,t,[{customMessage:null!=r?r:i,name:"IntersectionObserver",placedExperienceId:n}])}return s(t,e),b(t)}(g),w=function(e){function t(e){var n=e.placedExperienceId,r=e.customMessage;h(this,t);var i="Attempted to create a timestamp without an observer for experience with id ".concat(n,".");return a(this,t,[{customMessage:null!=r?r:i,name:"TimeStampNoObserver",placedExperienceId:n}])}return s(t,e),b(t)}(g),E=function(e){function t(e){var n,r=e.placedExperienceId,o=e.customMessage,c=e.currentState,s=e.newState;h(this,t);var l="Invalid time stamp state transition: ".concat((0,i.H)(c,s),".\nDropping time stamp.");return n=a(this,t,[{customMessage:null!=o?o:l,name:"InvalidStateTransition",placedExperienceId:r}]),(0,u.GV)("experience_sessions_invalid_state_transition",{sampleRate:1,tags:{placedExperienceId:r,transition:(0,i.H)(c,s)}}),n}return s(t,e),b(t)}(g),_=function(e){function t(e){var n=e.placedExperienceId,r=e.customMessage;h(this,t);var i="Attempted to remove an experience with id ".concat(n," from an empty session map.");return a(this,t,[{customMessage:null!=r?r:i,name:"RemoveOnEmptySessionMap",placedExperienceId:n}])}return s(t,e),b(t)}(g),S=function(e){function t(e){var n=e.placedExperienceId,r=e.customMessage;h(this,t);var i="Attempted to remove a non-existent experience with id ".concat(n,".");return a(this,t,[{customMessage:null!=r?r:i,name:"RemoveOnMissingExperience",placedExperienceId:n}])}return s(t,e),b(t)}(g),O=function(e){function t(e,n,r,i){h(this,t);var o=[{value:e,name:"Placed Experience ID"},{value:n,name:"Experience ID"},{value:r,name:"Placement ID"}].filter(function(e){return!e.value}).map(function(e){return e.name});return a(this,t,[{customMessage:o.length>0?"".concat(o.join(" and ")," ").concat(o.length>1?"are":"is"," required for this operation."):null!=i?i:"",name:"InvalidIdError",placedExperienceId:e||""}])}return s(t,e),b(t)}(g),I=function(e){function t(e){var n=e.placedExperienceId,r=e.customMessage;h(this,t);var i="No start state found in the timeline for experience with id ".concat(n,".");return a(this,t,[{customMessage:null!=r?r:i,name:"NoStart",placedExperienceId:n}])}return s(t,e),b(t)}(g),j=function(e){function t(e){var n=e.placedExperienceId,r=e.customMessage;h(this,t);var i="Total duration calculated is negative for experience with id ".concat(n,".");return a(this,t,[{customMessage:null!=r?r:i,name:"NegativeTotal",placedExperienceId:n}])}return s(t,e),b(t)}(g),k=function(e){function t(e){var n=e.placedExperienceId,r=e.customMessage;h(this,t);var i="Timeline ended without an end state for experience with id ".concat(n,".");return a(this,t,[{customMessage:null!=r?r:i,name:"NoEnd",placedExperienceId:n}])}return s(t,e),b(t)}(g),R=function(e){function t(e){var n=e.placedExperienceId,r=e.customMessage;h(this,t);var i="Total duration calculated is not a valid number for experience with id ".concat(n,".");return a(this,t,[{customMessage:null!=r?r:i,name:"InvalidTotal",placedExperienceId:n}])}return s(t,e),b(t)}(g),A=function(e){function t(e){var n=e.placedExperienceId,r=e.customMessage;h(this,t);var i="Attempted to resume without a pause timestamp for experience with id ".concat(n,". Was the session started before app focus?");return a(this,t,[{message:null!=r?r:i,name:"TimeStampNoPause",placedExperienceId:n}])}return s(t,e),b(t)}(y),P=[_,S,O,I,j,k,R];function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0;return function(){try{return e.apply(void 0,arguments)}catch(e){if(e instanceof Error){var a,s=(P.some(function(t){return e instanceof t})?e.placedExperienceId:i)||"0:unknown";o.$1.error("[Experience Session] - ".concat(t," - ").concat(e.name,":").concat(e.message));var l=function(e){if(Array.isArray(e))return e}(a=s.split(":"))||function(e,t){var n=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,u,c=[],a=!0,s=!1;try{for(o=(n=n.call(e)).next;!(a=(r=o.call(n)).done)&&(c.push(r.value),2!==c.length);a=!0);}catch(e){s=!0,i=e}finally{try{if(!a&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw i}}return c}}(a,0)||function(e,t){if(e){if("string"==typeof e)return c(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,2):void 0}}(a,0)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),f=l[0],p=l[1];(0,r.p)(t,e.name,p||"0",Number(f))}else{var d=String(e);o.$1.error("[Experience Session] - ".concat(t," - Error: ").concat(d)),(0,r.V)(e,t)}return u&&u(),n}}}},285845(e,t,n){n.d(t,{V:function(){return f},p:function(){return l}});var r,i,o=n(425347);function u(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var u=Object.create((r&&r.prototype instanceof s?r:s).prototype);return c(u,"_invoke",function(n,r,i){var o,u,c,s=0,l=i||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return o=t,u=0,c=e,p.n=n,a}};function d(n,r){for(u=n,c=r,t=0;!f&&s&&!i&&t<l.length;t++){var i,o=l[t],d=p.p,v=o[2];n>3?(i=v===r)&&(c=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=e):o[0]<=d&&((i=n<2&&d<o[1])?(u=0,p.v=r,p.n=o[1]):d<v&&(i=n<3||o[0]>r||r>v)&&(o[4]=n,o[5]=r,p.n=v,u=0))}if(i||n>1)return a;throw f=!0,r}return function(i,l,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,v),u=l,c=v;(t=u<2?e:c)||!f;){o||(u?u<3?(u>1&&(p.n=-1),d(u,c)):p.n=c:p.v=c);try{if(s=2,o){if(u||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,u<2&&(u=0)}else 1===u&&(t=o.return)&&t.call(o),u<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),u=1);o=e}else if((t=(f=p.n<0)?c:n.call(r,p))!==a)break}catch(t){o=e,u=1,c=t}finally{s=1}}return{value:t,done:f}}}(n,i,o),!0),u}var a={};function s(){}function l(){}function f(){}t=Object.getPrototypeOf;var p=f.prototype=s.prototype=Object.create([][r]?t(t([][r]())):(c(t={},r,function(){return this}),t));function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=f,c(p,"constructor",f),c(f,"constructor",l),l.displayName="GeneratorFunction",c(f,i,"GeneratorFunction"),c(p),c(p,i,"Generator"),c(p,r,function(){return this}),c(p,"toString",function(){return"[object Generator]"}),(u=function(){return{w:o,m:d}})()}function c(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}(c=function(e,t,n,r){function o(t,n){c(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function a(e,t,n,r,i,o,u){try{var c=e[o](u),a=c.value}catch(e){return void n(e)}c.done?t(a):Promise.resolve(a).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function u(e){a(o,r,i,u,c,"next",e)}function c(e){a(o,r,i,u,c,"throw",e)}u(void 0)})}}var l=(r=s(u().m(function e(t,n,r,i){return u().w(function(e){for(;;)switch(e.n){case 0:(0,o.GV)("experience_framework.view_duration.error",{sampleRate:1,tags:{func:t,type:n,experience_id:r,placement_id:i}});case 1:return e.a(2)}},e)})),function(e,t,n,i){return r.apply(this,arguments)}),f=(i=s(u().m(function e(t,n){var r;return u().w(function(e){for(;;)switch(e.n){case 0:r=t instanceof Error?t.message:String(t),(0,o.GV)("experience_framework.view_duration.unknown_error",{sampleRate:1,tags:{function:n,error:r}});case 1:return e.a(2)}},e)})),function(e,t){return i.apply(this,arguments)})},353973(e,t,n){n.d(t,{A:function(){return c}});var r=n(847505);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var o=n(368114),u=n(425347),c=function(e){var t=e.placedExperienceId,n=e.experienceId,c=e.placementId,a=e.endReason,s=e.timeline;(0,r.lP)(function(){var e=function(e,t){var n=t.findIndex(function(e){return"start"===e.state});if(-1===n)throw new r.wj({placedExperienceId:e});var o,u,c=function(e){if(void 0===o)return o=e.inView,!1;var t=o===e.inView;return o=e.inView,t},a=!0,s=0,l=function(e,t){var n="u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,void 0):void 0}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,c=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){a=!0,u=e},f:function(){try{c||null==n.return||n.return()}finally{if(a)throw u}}}}(t.slice(n));try{for(l.s();!(u=l.n()).done;){var f=u.value,p=f.inView?-f.time:f.time;if("end"===f.state){c(f)||(s+=p),a=!1;break}"resumed"===f.state&&(a=!0),a&&(c(f)||(s+=p),"paused"===f.state&&(a=!1))}}catch(e){l.e(e)}finally{l.f()}if(a)throw new r.j6({placedExperienceId:e});if(s<0)throw new r.if({placedExperienceId:e});if("number"!=typeof s||Number.isNaN(s))throw new r.uG({placedExperienceId:e});return s}(t,s);o.$1.log("[Experience Sessions] ✨ Total duration for experience ".concat(t," is ").concat(e,"ms - Sending to statsboard with end reason: ").concat(a)),(0,u.N9)("experience_framework.view_duration",e,{sampleRate:.2,tags:{placement_id:c,experience_id:n,end_reason:a}})},"calculateTotalDuration",void 0,t,function(){o.$1.error("[Experience Sessions] ❌ Error calculating total duration for experience ".concat(t," due to previous error"))})()}},194545(e,t,n){n.d(t,{H:function(){return r}});var r=function(e,t){return"".concat(e,"->").concat(t)}},956804(e,t,n){n.d(t,{$O:function(){return g},Dz:function(){return S},EZ:function(){return x},Hy:function(){return I},My:function(){return O},Y4:function(){return y},_4:function(){return j},hG:function(){return A},sE:function(){return R},vI:function(){return w},xL:function(){return E},xn:function(){return k}});var r,i=n(157203),o=n(867076),u=n(884963),c=n(71197),a=n(368114),s=n(559463),l=n(180881),f=n(425347);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){var r,i;r=t,i=n[t],(r=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return(0,f.GV)("".concat(e,".").concat(t),{sampleRate:r,tags:n})},b=function(e,t,n){(0,f.GV)("experience_framework.fetch.post_check.failures",{sampleRate:.01,tags:{placement_id:e,experience_in_store:t.experience_id,experience_from_server:null==n?void 0:n.experience_id}})},y=function(e,t){return o.A.create("UserExperiencePlatformResource",t?{extra_context:e,targeting:t}:{extra_context:e}).callGet()},g=function(e,t){return function(n){return o.A.create("UserExperiencePlatformResource",t?{extra_context:e,targeting:t}:{extra_context:e}).callGet().then(function(e){return e.resource_response?n((0,c.vv)(e.resource_response.data)):void 0})}},x=function(e){return function(t){return o.A.create("UserExperiencePlatformResource",{extra_context:e,multiExperiencePlatform:!0}).callGet().then(function(e){return e.resource_response?t((0,c.iN)(e.resource_response.data)):void 0})}},w=function(e,t){return function(n,r){var i=r().experiences[e];return i&&i.triggerable_placed_exps&&i.triggerable_placed_exps.length&&i.triggerable_placed_exps.forEach(function(n){var r,o,u=(function(e){if(Array.isArray(e))return e}(r=n.split(":"))||function(e,t){var n=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,u,c=[],a=!0,s=!1;try{for(o=(n=n.call(e)).next;!(a=(r=o.call(n)).done)&&(c.push(r.value),2!==c.length);a=!0);}catch(e){s=!0,i=e}finally{try{if(!a&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw i}}return c}}(r,0)||function(e,t){if(e){if("string"==typeof e)return h(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,2):void 0}}(r,0)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1],c=t,a=null==i||null==(o=i.metadata)?void 0:o[u];a&&(c=v(v({},t),"object"===p(a)?a:{})),(0,s.A)({url:"/v3/experiences/".concat(n.replace(":","%3A"),"/trigger/"),method:"PUT",data:c?{extra_context:JSON.stringify(c,null,1)}:{}}).then(function(){m("experienceservice","experimentTriggerCall.1",{placement_id:e,experience_id:u})})}),Promise.resolve()}},E=function(e,t,n,i,u){return function(s,f){var p,d=null==(p=(0,l.y)())?void 0:p.experimentsClient;if(m("experience_framework.fetch_experiences_for_placements","called",{placement_ids:e.join(","),has_extra_context:!!n},.01),t)return Promise.resolve();if(i&&(r=i),1===e.length){var v=e[0],h=f().experiences[v];if(JSON.stringify((null==h?void 0:h.extraContext)||null)===JSON.stringify(n)||(0,a.lC)(h)&&!(n&&Object.keys(n).length>0))return Promise.resolve()}return o.A.create("UserExperienceResource",{placement_ids:e,extra_context:n||null,targeting:i}).callGet().then(function(t){if(t.resource_response){var r=t.resource_response.data||{};if(u){var i=f().experiences;a.$1.log("[MVC] Post Checks - Checking existing experiences in store"),e.forEach(function(e){var t=i[e];t&&0!==t.experience_id&&(b(e,t,r[e]),r[e]=t)})}null!=d&&d.checkExperiment("experience_framework_web_custom_fetch_trigger_experiments").anyEnabled&&e.forEach(function(e){s(w(e,n))}),s((0,c.YT)(r))}})}},_=function(e,t,n,i){return function(u,a,s){var l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],f=arguments.length>4?arguments[4]:void 0,p=arguments.length>5?arguments[5]:void 0;return function(d,v){var h,m=v(),b=m.experiences,y=m.experiencesMulti,x=null,w=!0;if(l||(x=(w=!!b[u]&&b[u].experience_id===a)?b[u]:Array.isArray(y[u])&&(null==(h=y[u])?void 0:h.find(function(e){return e.experience_id===a}))),x&&x.experience_id===a||l&&u&&a){var E=o.A.create(e,{placed_experience_id:"".concat(u,"%3A").concat(a),extra_context:null!=f?f:{},targeting:p}),_=w?c.Uh:c.$d;switch(t){case"dismissed":return E.callDelete().then(function(){d(_(u,a,t)),d(g(void 0,r)),n&&i&&n({event_type:i,object_id_str:a.toString()})});case"completed":return E.callUpdate().then(function(){!s&&(d(_(u,a,t)),d(g(void 0,r)),n&&i&&n({event_type:i,object_id_str:a.toString()}))});case"viewed":return d(_(u,a,t)),E.callUpdate().then(function(){1000162===u&&d(g()),n&&i&&n({event_type:i,object_id_str:a.toString()})});case"completedWithoutHomefeed":return E.callUpdate().then(function(){s||d(_(u,a,t)),n&&i&&n({event_type:i,object_id_str:a.toString()})})}}return Promise.resolve()}}},S=function(){var e=(0,u.A)();return(0,i.useCallback)(_("UserExperienceViewedResource","viewed",e,4503),[e])},O=function(){var e=(0,u.A)();return(0,i.useCallback)(function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return arguments.length>4&&arguments[4],arguments.length>5&&arguments[5],function(r,o){var u,s=o(),l=s.experiences,p=s.experiencesMulti,d=null,v=!0;if(i||(d=(v=!!l[t]&&l[t].experience_id===n)?l[t]:Array.isArray(p[t])&&(null==(u=p[t])?void 0:u.find(function(e){return e.experience_id===n}))),d&&d.experience_id===n||i&&t&&n){var h=v?c.Uh:c.$d;a.$1.log("[MVC] View-End - Removing experience ".concat(t,":").concat(n," from store.")),(0,f.GV)("experience_framework.view_end",{tags:{placement_id:t,experience_id:n}}),r(h(t,n,"view-end")),e&&e({event_type:4503,object_id_str:n.toString()})}return Promise.resolve()}},[e])},I=function(){var e=(0,u.A)();return(0,i.useCallback)(_("UserExperienceCompletedResource","completed",e,6567),[e])},j=function(){var e=(0,u.A)();return(0,i.useCallback)(_("UserExperienceResource","dismissed",e,6568),[e])},k=function(){var e=(0,u.A)();return(0,i.useCallback)(_("UserExperienceCompletedResource","completedWithoutHomefeed",e,6567),[e])},R=function(e){return function(t,n){return t(w(e)),n().experiences[e]}},A=function(e,t,n,i){return function(o){n&&(r=n),o(w(e,t)),t&&Object.keys(t).length>0&&o(E([e],!1,t,n,i))}}},700886(e,t,n){n.d(t,{vI:function(){return r.vI},Pl:function(){return u},hG:function(){return r.hG},xn:function(){return r.xn},My:function(){return r.My},EZ:function(){return r.EZ},Dz:function(){return r.Dz},Hy:function(){return r.Hy},fE:function(){return a},Y4:function(){return r.Y4},xL:function(){return r.xL},_4:function(){return r._4},sE:function(){return r.sE},sj:function(){return c}});var r=n(956804),i=n(867076),o=function(e,t,n,o){return function(u,c){return function(a){if(u&&u.id){var s=i.A.create(e,{placed_experience_id:u.id,extra_context:{}});switch(t){case"dismissed":s.callDelete().then(function(){a((0,r.$O)()),n&&o&&n({event_type:o,object_id_str:u.id.toString()})});break;case"completed":s.callUpdate().then(function(){c||a((0,r.$O)()),n&&o&&n({event_type:o,object_id_str:u.id.toString()})});break;case"viewed":s.callUpdate().then(function(){n&&o&&n({event_type:o,object_id_str:u.id.toString()})})}}}}},u=function(e){return o("UserExperienceCompletedResource","completed",e,6567)},c=o("UserExperienceResource","dismissed"),a=function(e){return o("UserExperienceViewedResource","viewed",e,4503)};n(285845),n(353973)},193045(e,t,n){n.d(t,{Dq:function(){return i},KP:function(){return u},RQ:function(){return c},XB:function(){return o},yU:function(){return r}});var r="REFRESH_ALL_EXPERIENCES_MULTI",i="UPDATE_EXPERIENCE_MULTI",o="FETCH_EXPERIENCES",u="REFRESH_ALL_EXPERIENCES",c="UPDATE_EXPERIENCE"},71197(e,t,n){n.d(t,{$d:function(){return o},Uh:function(){return u},YT:function(){return a},iN:function(){return i},vv:function(){return c}});var r=n(193045),i=function(e){return{type:r.yU,payload:{experiencesMulti:e}}},o=function(e,t,n){return{type:r.Dq,payload:{placementId:e,experienceId:t,status:n}}},u=function(e,t,n){return{type:r.RQ,payload:{placementId:e,experienceId:t,status:n}}},c=function(e){return{type:r.KP,payload:{experiences:e}}},a=function(e){return{type:r.XB,payload:{experiences:e}}}},368114(e,t,n){n.d(t,{lC:function(){return b},V6:function(){return m},dz:function(){return O},al:function(){return x},NW:function(){return g},JY:function(){return I},Pf:function(){return y},$1:function(){return j},C3:function(){return w}});var r=n(157203),i=n(460657),o=n(424054);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n){var r;return(r=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==u(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=[11,1000168,40001],s=c(c({},1,{id:1,route:"/",onRoute:o.rz,placements:[11,1000541,1000503,40001]}),13,{id:13,route:"/business/hub/",onRoute:o.Zm,placements:[1000168]}),l=n(893984),f=n(954408),p=n(879667);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h={display_data:{},experience_id:1,id:"noop",placement_id:0,type:0};function m(e,t){var n=!!(e&&"object"===v(e)&&Object.keys(e).length>0&&Object.keys(h).every(function(t){return t in e}))&&1!==e.experience_id&&0!==e.type;if(t){if(!n)return!1;if("experience_id"in t)return e.experience_id===t.experience_id;if("type"in t)return e.type===t.type;if("status"in t)return"status"in e&&e.status===t.status;throw Error("Invalid options provided to isExperience. Options must be one of: { experience_id: number }, { type: number }, or { status: ExperienceStatus }")}return n}function b(e){return!!e&&0!==e.type}var y=function(e,t,n,r,i){var o=!(arguments.length>5)||void 0===arguments[5]||arguments[5],u="existingExperience";return r?b(r)?n&&(u="placementInSurface",!n.placements.includes(e))?{shouldRefresh:!0,refreshReasoning:"placementNotInSurface"}:i?(u="inSSRPlacement",a.includes(e)?{shouldRefresh:!1,refreshReasoning:u}:{shouldRefresh:!0,refreshReasoning:"notAnSSRPlacement"}):!o||(u="placementMounted",t.mountedPlacements[e]||t.registeredAfterActionPlacements[e])?{shouldRefresh:!1,refreshReasoning:u}:{shouldRefresh:!0,refreshReasoning:"placementNotMounted"}:{shouldRefresh:!0,refreshReasoning:"experienceNotRenderable"}:{shouldRefresh:!0,refreshReasoning:"noExistingExperience"}},g=function(e,t,n){var r=e[n];return t[n]&&b(r)?r:null};function x(e){var t;return null==(t=e.display_data)?void 0:t.anchor}function w(e){return Object.values(s).find(function(t){return t.onRoute?t.onRoute(e):t.route===e.pathname})}var E=/<(\w+)\s*([^>]*)>([^<]*)<\/\1>/gim,_=/(?:href)=["']?([^"'>\s\\]*)["']?/im,S=/(?:target)=["']?([^"'>\s\\]*)["']?/im,O=function(e,t){var n=function(e){for(var t=[],n=0,r=Array.from(e.matchAll(E)),i=0;i<r.length;i++){var o=r[i];if(o.index>n){var u=e.slice(n,o.index);u&&t.push({type:"text",content:u})}var c=function(e){if(Array.isArray(e))return e}(o)||function(e,t){var n=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,u,c=[],a=!0,s=!1;try{for(o=(n=n.call(e)).next;!(a=(r=o.call(n)).done)&&(c.push(r.value),4!==c.length);a=!0);}catch(e){s=!0,i=e}finally{try{if(!a&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(s)throw i}}return c}}(o,0)||function(e,t){if(e){if("string"==typeof e)return d(e,4);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,4):void 0}}(o,0)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=c[0],s=c[1],l=c[2],f=c[3];switch(s){case"a":t.push({type:"link",content:f||"",attrs:l||""});break;case"b":t.push({type:"bold",content:f||""});break;default:t.push({type:"text",content:a})}n=o.index+a.length}if(n<e.length){var p=e.slice(n);p&&t.push({type:"text",content:p})}return t}(e);return(0,p.jsx)(i.KJ,{inline:!0,size:t,children:n.map(function(e,n){var o=e.type,u=e.content,c=e.attrs;switch(o){case"text":return((null==u?void 0:u.split("\n"))||[]).map(function(e,n){return(0,p.jsxs)(r.Fragment,{children:[n>0&&(0,p.jsx)("br",{}),(0,p.jsx)(i.KJ,{inline:!0,size:t,children:e})]},"".concat(u,"-").concat(n))});case"bold":return(0,p.jsx)(i.KJ,{inline:!0,size:t,weight:"bold",children:u},"".concat(u,"-").concat(n));case"link":var a=null==c?void 0:c.match(_),s=a&&a.length>1?a[1]:void 0,l=null==c?void 0:c.match(S),d=l&&l.length>1?l[1]:void 0;if(!s)return(0,p.jsx)(i.KJ,{inline:!0,size:t,children:u},"".concat(u,"-").concat(n));var v=!1;return v=(0,f.A)({url:s}),(0,p.jsx)(i.N_,{display:"inline",externalLinkIcon:v?"default":"none",href:s,rel:v?"nofollow":"none",target:"_blank"===d?"blank":void 0,children:u},"".concat(s,"-").concat(n));default:return null}})})},I=function(){return"u">typeof window&&performance&&performance.now?Math.floor(performance.now()):Math.floor(Date.now())},j=(0,l.A)()&&(0,l.A)().debug_experience_session?console:{log:function(){},error:function(){},warn:function(){}}},772059(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.d(t,{YA:function(){return g},Ay:function(){return w},EQ:function(){return x}});var u,c,a,s,l=window.location.search.includes("debug_impressions=1")||document.cookie&&document.cookie.indexOf("debug_impressions=1")>-1,f={paused:"Pause",resumed:"Resume",stopped:"Flush",enter:"Enter viewport",exit:"Exit viewport"},p={},d={background:"#FF8A8A",transform:"scale(.98)"},v=i(i(i(i(i({init:function(e){return{transform:"scale(".concat(p[e]?.8:.99,")"),transition:"transform .2s ease-in-out",background:"#8E8E8E"}}},f.enter,{background:"#A0DCC8",transform:"scale(.99)"}),f.exit,d),f.stopped,d),f.paused,d),f.resumed,{background:"#0FA573",transform:"scale(.99)"}),h=(u=function e(t){var n=this;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");i(this,"lastIntersectionChange",null),i(this,"setMutationObserver",function(e){return n.mutationObserver=e,n}),i(this,"startMutationObserver",function(e){n.mutationObserver&&n.mutationObserver.observe(n.node,e)}),i(this,"stopMutationObserver",function(){n.mutationObserver&&n.mutationObserver.disconnect()}),i(this,"handleIntersectionVisibilityChange",function(e,t){n.lastIntersectionChange=e,[{type:1,isVisible:function(e){var t,n,r=null!=(t=null==(n=e.rootBounds)?void 0:n.bottom)?t:window.innerHeight;return e.isIntersecting&&e.boundingClientRect.top>=143&&e.boundingClientRect.top<r},isHidden:function(e){var t,n,r=null!=(t=null==(n=e.rootBounds)?void 0:n.bottom)?t:window.innerHeight;return!e.isIntersecting||e.boundingClientRect.top<143||e.boundingClientRect.top>=r}},{type:50,isVisible:function(e){return e.intersectionRatio>=.5},isHidden:function(e){return e.intersectionRatio<.5}},{type:80,isVisible:function(e){return e.intersectionRatio>=.8},isHidden:function(e){return e.intersectionRatio<.8}},{type:2,isVisible:function(e){var t,n,r=null!=(t=null==(n=e.rootBounds)?void 0:n.bottom)?t:window.innerHeight;return e.isIntersecting&&e.boundingClientRect.bottom<=r&&e.boundingClientRect.bottom>=143},isHidden:function(e){var t,n,r=null!=(t=null==(n=e.rootBounds)?void 0:n.bottom)?t:window.innerHeight;return!e.isIntersecting||e.boundingClientRect.bottom<143||e.boundingClientRect.bottom>r}}].forEach(function(r){var i=r.type,o=r.isVisible,u=r.isHidden;o(e)?n.lastLoggedVisibleEvent[i]||(n.addVisibleEvent(i,t),n.lastLoggedVisibleEvent[i]=!0):u(e)&&n.lastLoggedVisibleEvent[i]&&(n.addHiddenEvent(i,t),n.lastLoggedVisibleEvent[i]=!1)})}),i(this,"handleIntersectionChange",function(e){var t=e.intersectionRatio>0||e.isIntersecting,r=Date.now();n.handleIntersectionVisibilityChange(e,r),t&&!n.inViewport?(n.startTime=r,n.pinCellWidth=n.node.offsetWidth,n.pinCellHeight=n.node.offsetHeight,n._debug(f.enter,{startTime:r,node:n.node}),n.enterCallbacks.forEach(function(e){return e()})):!t&&n.inViewport&&(n._debug(f.exit,!0),n.exitCallbacks.forEach(function(e){return e(n.toJSON())})),n.inViewport=t}),this.enterCallbacks=[],this.exitCallbacks=[],this.inViewport=!1,this.node=t,this.startTime=0,this.debugId="",this.pinCellWidth=0,this.pinCellHeight=0,this.visibleEvents=new Map,this.hiddenEvents=new Map,this.lastLoggedVisibleEvent=i(i(i(i({},1,!1),50,!1),80,!1),2,!1)},c=[{key:"addVisibleEvent",value:function(e,t){var n=this.visibleEvents.get(e)||[];n.push(1e6*t),this.visibleEvents.set(e,n)}},{key:"addHiddenEvent",value:function(e,t){var n=this.hiddenEvents.get(e)||[];n.push(1e6*t),this.hiddenEvents.set(e,n)}},{key:"hasVisibleEvent",value:function(e){return this.visibleEvents.has(e)}},{key:"hasHiddenEvent",value:function(e){return this.hiddenEvents.has(e)}},{key:"onEnterViewport",value:function(e){return this.enterCallbacks.push(e),this}},{key:"onExitViewport",value:function(e){return this.exitCallbacks.push(e),this}},{key:"setDebugId",value:function(e){return this.debugId=e,l&&Object.assign(this.node.style,v.init(e)),this}},{key:"pause",value:function(){var e=this;return this.inViewport&&(this.addHiddenEvent(102,Date.now()),this._debug(f.paused,!0),this.exitCallbacks.forEach(function(t){return t(e.toJSON())})),this}},{key:"resume",value:function(){var e=this;if(this.inViewport){var t=Date.now();this._debug(f.resumed,{startTime:t}),this.startTime=t,this.addVisibleEvent(102,t),Object.keys(this.lastLoggedVisibleEvent).forEach(function(t){e.lastLoggedVisibleEvent[t]=!1}),this.lastIntersectionChange&&this.handleIntersectionVisibilityChange(this.lastIntersectionChange,t)}return this}},{key:"stop",value:function(e){var t=this;return this.inViewport&&(this._debug(f.stopped,!0),this.exitCallbacks.forEach(function(n){return n(t.toJSON(e))})),this}},{key:"toJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{startTime:1e6*this.startTime,endTime:1e6*Date.now(),forcedExit:e,pinCellWidth:this.pinCellWidth,pinCellHeight:this.pinCellHeight,visibleEvents:this.visibleEvents,hiddenEvents:this.hiddenEvents}}},{key:"toDebugJSON",value:function(){return{pinID:this.debugId,startTime:this.startTime,endTime:Date.now(),duration:"".concat((Date.now()-this.startTime)/1e3," seconds"),pinCellWidth:this.pinCellWidth,pinCellHeight:this.pinCellHeight}}},{key:"_debug",value:function(e,t){if(l)switch(window.console.log("\uD83D\uDCCC ".concat(e," -- ").concat(this.debugId)),!0===t&&window.console.log(this.toDebugJSON()),"object"===r(t)&&window.console.log(t),v[e]&&Object.assign(this.node.style,v[e]),e){case f.flushed:case f.paused:case f.exit:p[this.debugId]=!0}}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}(u.prototype,c),Object.defineProperty(u,"prototype",{writable:!1}),u);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}var g=!0,x=!1,w=(a=function e(){var t=this;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");b(this,"_delegateChange",function(e){e.forEach(function(e){var n=t.activeImpressions.get(e.target);n&&n.handleIntersectionChange(e)})}),b(this,"_handleMutations",function(e,n){var r=t.mutationObservers.get(n);r&&r.offsetHeight<1&&r&&t.stop(r,"removed")}),this.activeImpressions=new Map,this.mutationObservers=new Map,this.bottomHeight=0,this.bottomObstructions=new Set,this.pausePriority=x,this.observer=new window.IntersectionObserver(this._delegateChange),window.Cypress&&!window.activeImpressions&&(window.activeImpressions=new Map),this.paused=!1,this.topHeight=0,this.topObstructions=new Set,this.inExperiment=!1},s=[{key:"setExperimentStatus",value:function(e){this.inExperiment!==e&&(this.inExperiment=e)}},{key:"stop",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=this.activeImpressions.get(e);i&&(i.stop(r),i.mutationObserver&&this.mutationObservers.delete(i.mutationObserver),i.stopMutationObserver(),this.activeImpressions.delete(e),null==(t=window.activeImpressions)||t.delete(e),null==(n=this.observer)||n.unobserve(e))}},{key:"start",value:function(e){var t,n,r=this,i=this.activeImpressions.get(e);return i||(i=new h(e),this.activeImpressions.set(e,i),null==(t=window.activeImpressions)||t.set(e,i),null==(n=this.observer)||n.observe(e),i.setMutationObserver(new window.MutationObserver(function(e,t){return r._handleMutations(e,t)})),i.mutationObserver&&this.mutationObservers.set(i.mutationObserver,e),i.startMutationObserver({subtree:!0,attributes:!0,attributeFilter:["style"]})),i}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;this.paused||(Array.from(this.activeImpressions.values()).forEach(function(e){return e.pause()}),this.paused=!0,this.pausePriority===x&&(this.pausePriority=e))}},{key:"resume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;(e!==x||this.pausePriority!==g)&&this.paused&&(Array.from(this.activeImpressions.values()).forEach(function(e){return e.resume()}),this.paused=!1,this.pausePriority=x)}},{key:"addObstruction",value:function(e,t){"top"===e?this.topObstructions.add(t):"bottom"===e&&this.bottomObstructions.add(t),this._calculateRootMargins()}},{key:"removeObstruction",value:function(e,t){"top"===e?this.topObstructions.delete(t):"bottom"===e&&this.bottomObstructions.delete(t),this._calculateRootMargins()}},{key:"updateObstructions",value:function(){this._calculateRootMargins()}},{key:"_calculateRootMargins",value:function(){var e=this,t=Array.from(this.topObstructions).reduce(function(e,t){var n=t.getBoundingClientRect().bottom;return n>e?n:e},0),n=window.innerHeight-Array.from(this.bottomObstructions).reduce(function(e,t){var n=t.getBoundingClientRect().top;return n<e?n:e},window.innerHeight);if(t!==this.topHeight||n!==this.bottomHeight){var r,i={rootMargin:"".concat(-t,"px 0px ").concat(-n,"px"),threshold:[0,.5,.8,1]};null==(r=this.observer)||r.disconnect(),this.observer=new window.IntersectionObserver(this._delegateChange,i),Array.from(this.activeImpressions.values()).forEach(function(t){var n;return null==(n=e.observer)?void 0:n.observe(t.node)}),this.topHeight=t,this.bottomHeight=n}}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}(a.prototype,s),Object.defineProperty(a,"prototype",{writable:!1}),a)},998619(e,t,n){t.A=new(n(772059)).Ay}}]);